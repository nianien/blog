1:"$Sreact.fragment"
2:I[10616,["6874","static/chunks/6874-7791217feaf05c17.js","7177","static/chunks/app/layout-142e67ac4336647c.js"],"default"]
3:I[87555,[],""]
4:I[31295,[],""]
6:I[59665,[],"OutletBoundary"]
9:I[74911,[],"AsyncMetadataOutlet"]
b:I[59665,[],"ViewportBoundary"]
d:I[59665,[],"MetadataBoundary"]
f:I[26614,[],""]
:HL["/_next/static/media/e4af272ccee01ff0-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/fffdcdb4fb651185.css","style"]
0:{"P":null,"b":"bJbIT2Kmv3sjcEJSOV0Wp","p":"","c":["","blog","engineering","domain","%E8%A7%A3%E6%9E%90%E4%B8%89%E6%88%B7%E6%A8%A1%E5%9E%8B%E5%8F%8A%E5%BB%BA%E7%AB%8B%E8%B4%A6%E6%88%B7%E6%A8%A1%E5%9E%8B",""],"i":false,"f":[[["",{"children":["blog",{"children":[["slug","engineering/domain/%E8%A7%A3%E6%9E%90%E4%B8%89%E6%88%B7%E6%A8%A1%E5%9E%8B%E5%8F%8A%E5%BB%BA%E7%AB%8B%E8%B4%A6%E6%88%B7%E6%A8%A1%E5%9E%8B","c"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/fffdcdb4fb651185.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"zh-CN","children":["$","body",null,{"className":"__className_f367f3","children":["$","div",null,{"className":"min-h-screen flex flex-col","children":[["$","$L2",null,{}],["$","main",null,{"className":"flex-1","children":["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}],["$","footer",null,{"className":"bg-[var(--background)]","children":["$","div",null,{"className":"mx-auto max-w-7xl px-6 py-12 lg:px-8","children":["$","p",null,{"className":"text-center text-xs leading-5 text-gray-400","children":["© ",2026," Skyfalling"]}]}]}]]}]}]}]]}],{"children":["blog",["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["slug","engineering/domain/%E8%A7%A3%E6%9E%90%E4%B8%89%E6%88%B7%E6%A8%A1%E5%9E%8B%E5%8F%8A%E5%BB%BA%E7%AB%8B%E8%B4%A6%E6%88%B7%E6%A8%A1%E5%9E%8B","c"],["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L5",null,["$","$L6",null,{"children":["$L7","$L8",["$","$L9",null,{"promise":"$@a"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","ptbaMY8c5OSkqMlwImul8v",{"children":[["$","$Lb",null,{"children":"$Lc"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}],["$","$Ld",null,{"children":"$Le"}]]}],false]],"m":"$undefined","G":["$f","$undefined"],"s":false,"S":true}
10:"$Sreact.suspense"
11:I[74911,[],"AsyncMetadata"]
13:I[6874,["6874","static/chunks/6874-7791217feaf05c17.js","968","static/chunks/968-d7155a2506e36f1d.js","6909","static/chunks/app/blog/%5B...slug%5D/page-3137b04d8f9ed325.js"],""]
14:I[32923,["6874","static/chunks/6874-7791217feaf05c17.js","968","static/chunks/968-d7155a2506e36f1d.js","6909","static/chunks/app/blog/%5B...slug%5D/page-3137b04d8f9ed325.js"],"default"]
16:I[40780,["6874","static/chunks/6874-7791217feaf05c17.js","968","static/chunks/968-d7155a2506e36f1d.js","6909","static/chunks/app/blog/%5B...slug%5D/page-3137b04d8f9ed325.js"],"default"]
19:I[85300,["6874","static/chunks/6874-7791217feaf05c17.js","968","static/chunks/968-d7155a2506e36f1d.js","6909","static/chunks/app/blog/%5B...slug%5D/page-3137b04d8f9ed325.js"],"default"]
e:["$","div",null,{"hidden":true,"children":["$","$10",null,{"fallback":null,"children":["$","$L11",null,{"promise":"$@12"}]}]}]
15:T508f,<p>　　账户体系是支付系统的基础，它的设计直接影响整个系统的特性。这里探讨如何针对电子商务系统的账户体系设计。我们从一些基本概念开始入手，了解怎么建模。</p>
<h3>1 三户模型 <a href="#t1" id="t1"></a></h3>
<p>　　三户模型最早是在增强型电信运营图（Enhanced Telecom Operations Map，eTOM）中提出，在电信行业中得到广泛使用。 三户指客户（Customer）、用户（User）和账户(Account)。eTOM 引入是电信行业营销模型转向“以客户为中心”的理念而产生的成果。围绕客户建立用户和账户，这三个是相互关联的实体。近年来，金融行业也逐步接受和采用了三户模型。</p>
<ul>
<li><strong>客户</strong>，指自然人或者法人。法人一般被称之为企业客户。如无特指，一般客户指个人客户。</li>
<li><strong>用户</strong>，指通过注册的方式进入系统，使用系统提供的服务的实体，也称为登录账户，即用户在系统中登录凭证和个人信息。对应的，法人客户在系统中注册后，被称之为商户。</li>
<li><strong>账户</strong>，这里特指支付账户，指用户在支付系统中用于交易的资金所有者权益的凭证。</li>
</ul>
<h3>2 客户 <a href="#t2" id="t2"></a></h3>
<h4>2.1 个人客户 <a href="#t3" id="t3"></a></h4>
<p>　　在银行体系中，一般是先有客户，再有用户。早期个人客户通过柜台人员操作注册到银行体系中，柜台人员在处理时，先添加客户信息，再注册账户信息。而在互联网系统中， 一般是用户先注册，先有用户，然后补充客户身份信息。也就是客户身份信息是在运行过程中逐步完善的。在银行柜台，操作人员通过面签或实名方式在系统中建立客户对象。这个对象的业务主键是证件号（如，身份证，假设目前 18 位证件都不重号），所有相同证件我们都视为同一个客户，不论是不是同一个系统中。同一个证件号，不论在工行还是中行，开出来的客户，其实都对应着现实中的同一个人。</p>
<p>　　在一个平台体系中，通过系统给客户分配的唯一 ID 号客户 ID 来标识客户对像。这里面就有一个关键业务，既然相同证件都会识别成一个客户，那么当相同的证件号进入系统时，系统是如何处理的？当然是合成一个了，这个过程叫做客户归并，即：<strong>将相同证件的客户合成同一个客户号的过程，我们称为归并</strong>。归并是有风险的，所以需要一些鉴权手段来处理。在互联网应用中，一个系统中客户的生命周期如下：</p>
<p><img src="/images/blog/engineering/business-image_3_1.png" alt="image_3_1.png"></p>
<p>注意在这个流程中没有销户的状态。这是为了支持历史业务的处理，客户一般不做销户。此外这个流程和支付账户的流程比较类似，这是为了方便在客户层面做账户控制。以司法协查为例，某个客户被协查以致账户冻结，需要冻结该客户下所有资金账户，这些账户都被止付。</p>
<h4>2.2 企业客户 <a href="#t4" id="t4"></a></h4>
<p>　　企业客户相对个人客户来说比较复杂点，但三户模型仍然适用。同个人客户一样，企业客户在银行或支付平台开设资金账户，资金账户归属于此客户。企业客户是一个组织，其账户必然是组织授权内部人员去操作。但是这个操作人，同个人客户一样，只是系统的使用者，即用户。企业的资金比较大，并且有严格的业务流程，所以在系统使用上，一般是多个用户操作一个或多个资金账户。这种关系本身来说，也是一种授权关系，企业授权相应的用户来操作特定的资金账户，只不过为了管理方便，可以引入角色管理机制来实现。对于支付公司来说，企业客户通常都是发展商户过程中产生的。企业客户的识别同个人客户识别也是一样的，通过企业证件来统一识别。相同的企业证件号归并到同一个企业客户下面。建立企业客户的好处在于：</p>
<ul>
<li>有些企业本身只开通了企业服务业务，而不开通商户服务；</li>
<li>一个企业可以开通多个商户，企业客户是这些多个商户的统计口径。</li>
</ul>
<h4>2.3 客户模型 <a href="#t5" id="t5"></a></h4>
<p>　　对客户的处理，在银行系统中是 CIF 系统或 ECIF 系统，而在互联网模式下，很多都是基于微服务的体系，如何划分微服务，这块要从客户系统对提供的业务主题来分。比如：对于个人客户，客户识别就是一个服务主题，对于一个客户有多种多样的识别方式，除了证件外，还包括生物识别，比如画像、指纹等。</p>
<ul>
<li>基本信息也是一个服务主题：包括客户的最基本的信息，姓名、年令、职业等;</li>
<li>管理信息也是一个服务主题：比如这个客户的评级、是否集团员工等；</li>
<li>客户标签也是一个服务主题：所谓标签，就是从不同的维度来给客户做个标记，一个客户有多个标签，当然，前提是要对标签做好规划；</li>
<li>协议管理也是客户的一个服务主题：这里面有授权协议、委托协议等。</li>
</ul>
<p>当然，客户还有其它的一些主题，这个要看公司的业务了。</p>
<p><img src="/images/blog/engineering/business-image_3_2.png" alt="image_3_2.png"></p>
<h3>3 用户和商户 <a href="#t6" id="t6"></a></h3>
<h4>3.1 用户 <a href="#t7" id="t7"></a></h4>
<p>　　用户是账户的操作实体，它是由客户来注册到系统中来的。虽然用户通过客户间接的拥有了资金账户，但这种关系并不是绝对的，比如，一个用户可以授权另一个用户进行账户的余额查询。所以，用户与资金账户之间我们可以抽象出一种授权关系，凡是授权用户，都可以操作资金账户，当然，这种授权包括客户自己的用户。用户的建立比较简单，一般自助注册后就可以生成用户实体了。用户的生命周期如下：</p>
<p><img src="/images/blog/engineering/business-image_3_3.png" alt="image_3_3.png"></p>
<p>　　如果用户通过简易注册方式生成，这种情况下生成的是个预开户状态的用户，用户需要进一步完善一些信息才能变成正常用户，比如有些平台，在用户第一次登录时要求设置密保问题及答案。如果用户采用标准注册方式注册 的，可以直接成正常状态用户，正常做业务了。</p>
<p>　　如果用户想要销户，收到销户申请后，不能直接销户，前面我们说过了，客户是通过用户来进行资金账户的管理与操作的，没有用户，资金账户就有可能没法玩了（假设客户只授权自己的一个而且只有一个用户来操作资金账户），特别是一些账户还存在债务。所以，此时有个确认过程，要求各业务系统确认此用户下的所有账户是否可以销户，如果没有问题，先销资金账户，当用户下的所有资金账户都销户完毕，再销用户，用户销户完成后，会释放出此用户占用的资源，如注册手机号。</p>
<p>　　用户除了生命周期状态外，还有一个管理状态，比如冻结，从现实模型中来说，这个是不应该放在用户层面的而是放在资金账户层面上的，但互联网模式下，一个用户有多个资金账户，为了用户体验，把这些放在了用户层面上了，就如同支付密码放在用户层面上一样。</p>
<h4>3.2 商户 <a href="#t8" id="t8"></a></h4>
<p>　　商户是企业客户的一个业务影子，或是看成资金账户分组的一个手段。商户是客户一个外围业务，如果把它看成用户平级层面也是可以的，即：此商户所有业务产生的资金进入到一个分类资金账户里。不论怎么说，一个企业不论开多少个商户，每个商户又开通多少个资金账户，都改变不了资金账户的归属关系，它是现实客户这个实体的。对客户的处理，在银行系统中是 CIF 系统或 ECIF 系统，而在互联网模式下，很多都是基于微服务的体系，如何划分微服务，这块要从客户系统对提供的业务主题来分。</p>
<h3>4 账户 <a href="#t9" id="t9"></a></h3>
<h4>4.1 基本概念 <a href="#t10" id="t10"></a></h4>
<p>　　账户设置，一般是从交易开始的。交易的实现必须有账户的支持，账户是交易的基本构成元素。从支付系统的角度，交易中涉及到的资金流是资金从一个账户流向另一个账户。发起交易的一方，被称之为交易主体，他可以是个人，也可以是一个机构。资金从该主体所拥有的账户中流出。而接收交易的一方，被称为交易对手，他也可以是个人，或者机构。和第三方支付或者金融机构的交易不同，电商系统中，交易还会涉及到渠道。由于电商系统本身并无清结算的资质，所有资金从交易主体到交易对手的账户的流动，在大部分情况下，并没有经过电商系统，而是由电商系统调用支付渠道提供的接口，由它来完成真正的支付过程。当然，渠道也不是活雷锋，在这个过程中，渠道要收取费用。所以，在电商系统中，一次交易会涉及到三个账户： 交易主体账户、交易对手账户以及支付渠道账户。</p>
<p><strong>支付账户和登录账户</strong></p>
<p>　　账户体系设计首先要区分两个概念，支付账户和登录账户。这是两个不同业务领域的概念。<strong>支付账户</strong>指用户在支付系统中用于交易的资金所有者权益的凭证。<strong>登录账号</strong>指用户在系统中的登录的凭证和个人信息。一个用户可以有多个登录账户，一个登录账户可以有多个支付账户，比如零钱账户，储值卡账户等。 一般来说，支付账户不会在多个登录账户之间共用。如果没有特殊说明，下文中的账户，都默认指支付账户。</p>
<p><strong>会计科目与账户</strong></p>
<p>　　公司的会计需要对每一笔交易都要做详细的记录，即记账。公司每天都产生大量的交易行为，为了便于管理和统计，一个简单的方法是对交易进行分类，比如食品、带宽、办公用品等等。这个分类，按照公司的规模和业务复杂度，可以有一级、二级、三级或者更多级的结构，这被称之为<strong>会计科目</strong>。记账时，除了交易明细，还需要在每个级别上对交易额进行汇总。 一般来说，一级科目上汇总称为<strong>总帐科目</strong>，而详细记录称为<strong>明细科目</strong>。在电商系统中，由于涉及到的参与方较多，记账也相对复杂，但基本方法也是类似的。电商的参与者可以分为商户、买家和渠道，对这三类参与者，都需要分别建立总帐账户和明细账户。</p>
<p><strong>内部账户和外部账户</strong></p>
<p>　　当用户使用银行卡来支付时，电商支付系统需要和银行对接，从用户银行卡所代表的账户上扣除资金。对接了银行，第三方支付等机构的电商支付系统，它需要连接到用户在这些机构的账户来执行扣款或者充值操作，这些账户称为<strong>外部账户</strong>。对外部账户，支付系统只能记录账户在本系统的明细以及累计消费额，无法得知账户真正余额。不少电商在玩零钱的概念，也就是让用户充值到零钱，使用的时候就直接从零钱中扣除。这就需要零钱账户。这是电商系统中自己设立的账户，所以也叫<strong>内部账户</strong>，可以知道账户的全部消费明细和余额。当然，除了零钱账户，也可以有储值卡账户、信用账户等。那问题来了，什么时候需要建立账户，比如优惠券，需要账户吗？一次消费的储值卡和可以充值的储值卡，需要建立账户吗？这里先埋个雷。</p>
<p><strong>收款账户和收单账户</strong></p>
<p>　　当电商要对接银行时，往往都会被要求开设一个收款账户。用户通过这个银行来支付时，钱就被转到这个账户上。对第三方支付也是一样。收款账户是开设在银行或者第三方支付这边的，即渠道侧。一般来说，渠道每天都可以提供这个账户的交易流水供电商对账用。这样在电商这边，渠道就成为一个收单机构。所以在电商这边，建立这个收款账户对应的对账用的收单账号，用来记录通过这个渠道进行的各项交易流水。</p>
<h4>4.2 三类账户 <a href="#t11" id="t11"></a></h4>
<p>　　在设计支付账户系统时，合规是第一要求，和账户相关的法规，最重要的是近期央行发布的三个文件。 从 2013 年 3 月起，国家相继制定一系列“互联网+”计划，推动了移动互联网、大数据等与现代制造业、服务业相结合，引导企业转型，促进经济健康发展。在此背景下，央行相继发布了三个文件：</p>
<ul>
<li>「<strong>中国人民银行关于改进个人银行账户服务加强账户管理的通知</strong>」，银发〔2015〕392 号，2015 年 12 月 25 日发文，正式启动账户分类管理工作。</li>
<li>「<strong>中国人民银行关于落实个人银行账户分类管理制度的通知</strong>」，银发〔2016〕302 号, 2016 年 11 月 25 日发文，明确了同一个人在同一个银行只能有一个<code>I</code>类账户的要求。</li>
<li>「<strong>中国人民银行关于加强支付结算管理防范电信网络新型违法犯罪有关事项的通知</strong>」，银发〔2016〕261 号， 2016 年 9 月 20 日发文，调整并细化了账户分类及使用要求。</li>
</ul>
<p>在这些文件中，央行明确对账户实施分类管理的要求。 对这三类账户区别，总结如下：</p>
<p><img src="/images/blog/engineering/business-image_3_4.png" alt="image_3_4.png"></p>
<h4>4.3 生命周期 <a href="#t12" id="t12"></a></h4>
<p><img src="/images/blog/engineering/business-image_3_5.png" alt="image_3_5.png"></p>
<ul>
<li><strong>账户开立与绑卡</strong>：同一个人在同一银行只能开立一个<code>Ⅰ</code>类户，<code>I</code>类户的设立需要面对面审核，电子渠道开立的<code>Ⅱ</code>类户和<code>Ⅲ</code>类户需绑定银行账户进行验证，不得绑定支付机构账户验证，<code>Ⅱ</code>类户需向绑定账户验证<code>5</code>要素（<code>4</code>要素：姓名、身份证号、手机号、银行卡号，额外增加账户等级），<code>Ⅲ</code>类户需验证<code>4</code>要素，银联支持支持<code>Ⅱ</code>、<code>Ⅲ</code>类账户跨行验证绑定账户信息。</li>
<li><strong>资金互转</strong>：对非面对面开立的<code>Ⅱ</code>、<code>Ⅲ</code>类户，限制非绑定账户转入，允许<code>Ⅱ</code>、<code>Ⅲ</code>类户向绑定账户直接借记资金，银联支持<code>Ⅱ</code>、<code>Ⅲ</code>类账户与绑定账户间通过借记和贷记业务实现灵活便捷的资金划付。</li>
<li><strong>账户使用</strong>：<code>I</code>类账户、对面核实身份的<code>Ⅱ</code>类户可以发行实体银行卡，其他账户不能使用实体银行卡，<code>Ⅱ</code>、<code>Ⅲ</code>类户可以通过云闪付、二维码等支付工具来完成支付，银联支持<code>Ⅱ</code>、<code>Ⅲ</code>类账户便捷生成基于安全芯片、主机卡模拟或二维码等技术的支付工具。</li>
</ul>
<h4>4.3 账户建模 <a href="#t13" id="t13"></a></h4>
<p>在支付系统中，账户的建模，主要是从如下几个方面来考虑：</p>
<ul>
<li><strong>交易的需求</strong>，比如检查账户是否被锁定、余额是否足够、是否有效等。</li>
<li><strong>记账的需求</strong>，按照公司会计需求记录账户上的所有行为，包括支出、充值、转账等。</li>
<li><strong>对账的需求</strong>，包括和支付渠道、商户、个人的对账需求，核对交易和账户余额是否正确。</li>
<li><strong>风控的需求</strong>，如反洗钱、反欺诈等，都需要依赖于账户体系来提供核心数据。</li>
<li><strong>信用的需求</strong>，对用户、资产、商户等主体进行信用评估时，也需要依赖账户体系来提供的核心数据。</li>
</ul>
<p>这五个需求，按照其设计的优先级，也是从支付、记账、对账、风控来进行。 支付系统根据其发展所处的阶段，逐步将新增需求纳入设计中。说了这么多，目的是为了对账户建模。账户模型是和公司业务密切相关的，公司不同规模，发展的不同阶段需要不同的模型。从交易模型中可以衍生出针对各个角色的账户流水，即明细模型，用于支持对账。根据业务需要，可以设置多种账户，如支付账户、预付卡账户、代扣账户、零钱账户、结算账户等。从类别上来说，这里的账户，一般指总账账户。一般来说电商系统中涉及的账户类型有：</p>
<ul>
<li><strong>虚拟币账户</strong>：用户和使用虚拟币的商户都需要建立虚拟币账户；</li>
<li><strong>代扣账户</strong>： 用来支持订阅类型的定期代扣；</li>
<li><strong>零钱账户</strong>：电商的内部账号，用户、商户、清算单位需要建立零钱账户。</li>
<li><strong>第三方支付账户</strong>：用户在第三方支付机构建立的账户。</li>
<li><strong>银行卡账户</strong>：用户的银行卡信息，每个卡对应一个账户。</li>
<li><strong>结算账户</strong>：用来支持和第三方支付公司、银行进行结算用，第三方支付需要为每个商户号建立结算账户；银行需要为借记卡、贷记卡分别建立结算账户，一般在银行卡直连时使用。</li>
<li><strong>代扣代缴账户</strong>：用来支持代扣税款业务。</li>
</ul>
<p>对这些账户，需要设置如下属性，基本属性，包括：</p>
<ul>
<li><strong>账户号或称为账户 ID</strong>，一般是系统自动生成。特别注意的是，要事先约定好账户 ID 的规则，比如头三位用来表示账户类型，后几位用来表示账户编号等，务必保证根据账号号能够快速确定账户类型，并且保证账户号是不重复的。</li>
<li><strong>账户名称</strong>，一般是由用户自己设置的，显示用。</li>
<li><strong>账户使用的货币类型</strong>，注意虽然一张银行卡可以支持多个币种，实际在内部，还是针对每个币种建立独立的子账户。涉及到多币种的账户，也可以采用类似的建模方案。</li>
<li><strong>会计科目代码</strong>，一般是一级会计科目的代码。</li>
</ul>
<p>账户控制相关：</p>
<ul>
<li>是否允许充值；</li>
<li>是否允许提现；</li>
<li>是否允许透支；</li>
<li>是否允许支付；</li>
<li>是否允许转账进入；</li>
<li>是否允许转账转出；</li>
<li>是否有安全保障；</li>
<li>是否激活；</li>
<li>是否冻结。</li>
</ul>
<p>资金相关：</p>
<ul>
<li>当前账户余额，等于可用余额+冻结余额；</li>
<li>当前账户可用余额；</li>
<li>当前账户冻结的余额，冻结余额指在账户上暂不能使用的额度。在支付的时候，往往是先冻结，商品出库后，再实际执行扣款。</li>
</ul>
<p>银行卡、第三方支付信息：</p>
<ul>
<li>第三方实体的 ID；</li>
<li>第三方账号，如银行卡号或者在第三方支付的<code>open_id</code>等；</li>
<li>第三方的<code>app_id</code>；</li>
<li>账号的失效日期，该账号什么时候失效。</li>
</ul>
<p>注意，有些第三方信息是不能保存的，如用户的账号密码、信用卡的 CV 号等。为了避免账户信息被爬库或者数据库信息意外泄露，一般还需要对敏感字段，如密码等，进行加密保存，甚至保存到另外的表中。更进一步，为了避免账户信息被意外修改，还可以增加一个校验字段，在写入数据时设置该字段，在读取数据时做校验，一旦发现数据有问题，则关闭该账号。</p>
17:T3a5b,<h1>用户系统设计:三户模型&amp;三层身份模型</h1>
<h3>三户模型</h3>
<p>三户模型最早是在增强型电信运营图（Enhanced Telecom Operations Map，eTOM）中提出，在电信行业中得到广泛使用。 三户指客户（Customer）、用户（User）和账户(Account)。eTOM 引入是电信行业营销模型转向“以客户为中心”的理念而产生的成果。围绕客户建立用户和账户。这三个是相互关联的实体，这种关联只是一个归属和映射的关系，而三个实体本身是相互独立的，分别是体现完全不同的几个域的信息，<strong>客户</strong>是体现了<strong>社会域</strong>的信息，<strong>用户</strong>体现了<strong>业务域</strong>的信息，<strong>账户</strong>体现的是<strong>资金域</strong>的信息。</p>
<ul>
<li>客户（customer）：是指客户（自然人、公司、集团公司）的基本资料信息。例如自然人的姓名、手机号、身份证、邮箱地址等等；公司的五证一照、行业、联系人、网站地址、通讯地址等等。如无特指，一般客户指个人客户。</li>
<li>用户（user）：指客户在系统的登录账号信息，包括账号、密码、人员权限、角色等等。对应的，法人客户在系统中注册后，被称之为商户。</li>
<li>账户（account）：指客户在系统的虚拟账户，主要与交易记账相关。</li>
</ul>
<p><img src="https://www.biaodianfu.com/wp-content/uploads/2020/09/customer-user-account.png" alt=""></p>
<p>以电信业务为例：</p>
<ul>
<li>客户：人</li>
<li>用户：电信产品的实例表现</li>
<li>账户：付费的账号</li>
</ul>
<p>假设张三是中国典电信的一个客户，张三办理了一个手机SIM卡和一个宽带业务。其中手机SIM卡和宽带业务分别作为一个用户存在（电信产品实例）。下面还有一个账户的概念，账户是用户进行付费的。一般情况，一个用户只有一个账户，以上例为例，张三有一个账户，为手机号和宽带付费。当然，有的人可能存在多个账户，例如手机号是一个账户，宽带是是一个账户。</p>
<p>总结一下，一个客户（张三）可以有多个用户（一个手机号和一个宽带业务），但一个用户只能归属于一个客户。一个客户可以用多个账户，但一个账户也只能归属于一个客户。账户和用户的关系比较复杂，一般情况，一个账户可以给多个用户付费，但也允许，一个用户的不同费用由多个账户付费，所以账户和用户之间是多对多的关系。</p>
<h4>客户</h4>
<p>客户是一个社会化的概念，一个自然人或一个法人就称之为一个客户，法人客户既可以是一个企业，也可以是与这个企业、集团相关的自然人客户，可以称之为一个集团客户组。</p>
<p>客户可分为个人客户，企业客户。一个客户可以包含多个用户，客户通过唯一的客户标识来确定。客户描述一个客户的自然属性，客户可以和用户一一对应，也可以和用户一对多。<strong>即使不使用业务，也可能存在客户</strong>，因为客户是自然存在的。客户信息包含客户名，地址，邮政编码，性别，年龄，职业，证件号码等等信息，是自然存在的信息。</p>
<p><strong>个人客户</strong></p>
<p>在互联网系统中，一般是用户先注册，先有用户，然后补充客户身份信息。也就是客户身份信息是在运行过程中逐步完善的。在电信体系或银行体系，客户的主键通常是证件号（如身份证），将所有相同的证件视为同一客户。在互联网行业通常是将手机号识别为主键（<strong>注意：手机号有注销、更换等问题</strong>），这里面就有一个关键业务，既然相同证件的证件号或手机号会识别成一个客户，当相同的证件号或手机号进入系统时，系统是如何处理的？当然是合成一个了，这个过程叫做客户归并，即：将客户合成同一个客户号的过程，我们称为归并。归并是有风险的，所以需要一些<strong>鉴权手段</strong>来处理。</p>
<p>在互联网应用中，一个系统中的生命周期如下：</p>
<p><img src="https://www.biaodianfu.com/wp-content/uploads/2020/09/customer.png" alt=""></p>
<p>正常的互联网站点一般只有正常和禁入2种状态，银行业可能还会包含冻结和止付状态（以司法协查为例，某个客户被协查以致账户冻结，需要冻结该客户下所有资金账户，这些账户都被止付）。</p>
<p>注意在这个流程中<strong>没有销户的状态</strong>。 这是为了<strong>支持历史业务的处理</strong>，客户一般不做销户。 此外这个流程和支付账户的流程比较类似，这是为了方便在客户层面做账户控制。</p>
<p><strong>存在问题，用户手机号更换带来的身份识别不能解决。</strong></p>
<p><strong>企业客户</strong></p>
<p>企业客户相对个人客户来说比较复杂点，但三户模型仍然适用。企业客户是一个组织，其账户必然是组织授权内部人员去操作。但是这个操作人，同个人客户一样，只是系统的使用者，即用户。企业的资金比较大，并且有严格的业务流程，所以在系统使用上，一般是多个用户操作一个或多个资金账户。这种关系本身来说，也是一种授权关系，企业授权相应的用户来操作特定的资金账户，只不过为了管理方便，可以引入角色管理机制来实现。对于支付公司来说，企业客户通常都是发展商户过程中产生的。企业客户的识别同个人客户识别也是一样的，通过企业证件来统一识别。相同的企业证件号归并到同一个企业客户下面。建立企业客户的好处在于：</p>
<ul>
<li>有些企业本身只开通了企业服务业务，而不开通商户服务</li>
<li>一个企业可以开通多个商户，企业客户是这些多个商户的统计口径</li>
</ul>
<h4>用户</h4>
<p>用户是在产品基础上产生的实体。如果说一个客户使用了多个产品，那么一个客户就会对应好几个用户（即产品）。</p>
<p><strong>个体用户</strong></p>
<p>用户与资金账户之间我们可以抽象出一种授权关系，凡是授权用户，都可以操作资金账户，当然，这种授权包括客户自己的用户。用户的建立比较简单，一般自助注册后就可以生成用户实体了。</p>
<p>用户的生命周期如下：</p>
<p><img src="https://www.biaodianfu.com/wp-content/uploads/2020/09/user.png" alt=""></p>
<p>如果用户想要销户，收到销户申请后，不能直接销户，客户是通过用户来进行资金账户的管理与操作的，所以，此时有个确认过程，要求各业务系统确认此用户下的所有账户是否可以销户，如果没有问题，先销资金账户，当用户下的所有资金账户都销户完毕，再销用户，用户销户完成后，会释放出此用户占用的资源，如注册手机号。</p>
<p>在互联网环境比较多的场景是用户更新手机号，用户更新手机号的时候涉及到的两个手机号都需要验证。需要注意的是， 更新手机号需要涉及到更新客户ID。</p>
<p>用户除了生命周期状态外，还有一个管理状态，比如锁定，从现实模型中来说，这个是不应该放在用户层面的而是放在账户层面上的，但互联网模式下，一个用户有多个资金账户，为了用户体验，把这些放在了用户层面上了，就如同支付密码放在用户层面上一样。</p>
<p><strong>商户</strong></p>
<p>商户是企业客户的一个业务影子，或是看成资金账户分组的一个手段。商户是客户一个外围业务，如果把它看成用户平级层面也是可以的，即：此商户所有业务产生的资金进入到一个分类资金账户里。不论怎么说，一个企业不论开多少个商户，每个商户又开通多少个资金账户，都改变不了资金账户的归属关系，它是现实客户这个实体的。</p>
<h4>账户</h4>
<p>账户的概念起源于金融业，只是一个客户存放资金的实体，目的是为选择的产品付费。一个客户可以拥有一个账户也可以拥有多个账户，账户上的资金可以为客户本人的用户付费，也可以为其他客户的用户付费，这种付费关系需要一个付费规则进行关联。</p>
<p>既然账户关系到付费规则，必然会引出账单的概念。一般来首先要生成用户账单，账单应该归属于用户。</p>
<p>账单分为两级，客户账单和用户账单：</p>
<ul>
<li>客户账单是根据用户账单按照规则进行简单的算术加和得到的。</li>
<li>用户账单可以进一步细分为账单项，账单项是为客户打印账单提供清晰明了的消费明细。</li>
</ul>
<p>账单应当归属于用户，为客户提供的账单应当以产品为单元来生成账单，一般的消费习惯都是以产品为单元来付费；但同时也应该生成客户账单，如果一个客户选择了运营商的多个产品，那么客户如果需要一个所有产品的账单，运营商应当提供，同时集团客户需要一个集团所有客户的消费明细，也需要有一个集团客户账单。</p>
<p>用户和账户的映射关系，主要就是销账规则。销账流程中处理模型应当也是按照用户的账单来销账，而不是按照客户账单，客户的账单应当只是用户账单的简单算术运算的得到的账单，只提供打印。</p>
<p>客户和账户应当有一个归属的对应规则，该规则应当是一种归属关系，个人账户应该归属于个人客户，集团账户应当归属于集团客户。但这只是一种归属关系，而没有付费关系，账户可以跨客户为几个用户付费，也可以为单个用户账单的某个账目付费。</p>
<p>产品在市场提供时难免会遇到，产品的某项子功能的交叉优惠，这种交叉优惠，应当打包成为一个产品。在具体的系统模型中的体现就是增加一个用户，并赋予一定的资费，同时指定一个账户来为其销账，就统一了整个模型。</p>
<p>账户的生命周期：</p>
<p><img src="https://www.biaodianfu.com/wp-content/uploads/2020/09/account.png" alt=""></p>
<p><strong>账户建模</strong></p>
<p>在支付系统中，账户的建模，主要是从如下几个方面来考虑：</p>
<ul>
<li>交易的需求，比如检查账户是否被锁定、余额是否足够、是否有效等。</li>
<li>记账的需求，按照公司会计需求记录账户上的所有行为，包括支出、充值、转账等。</li>
<li>对账的需求，包括和支付渠道、商户、个人的对账需求，核对交易和账户余额是否正确。</li>
<li>风控的需求，如反洗钱、反欺诈等，都需要依赖于账户体系来提供核心数据。</li>
<li>信用的需求，对用户、资产、商户等主体进行信用评估时，也需要依赖账户体系来提供的核心数据。</li>
</ul>
<p>这五个需求，按照其设计的优先级，也是从支付、记账、对账、风控来进行。支付系统根据其发展所处的阶段，逐步将新增需求纳入设计中。</p>
<p>根据业务需要，可以设置多种账户，如支付账户、预付卡账户、代扣账户、零钱账户、结算账户等。一般来说电商系统中涉及的账户类型有：</p>
<ul>
<li>虚拟币账号：用户和使用虚拟币的商户都需要建立虚拟币账户。</li>
<li>代扣账号： 用来支持订阅类型的定期代扣；</li>
<li>零钱账号：即电商的内部账号，用户、商户、清算单位需要建立零钱账户</li>
<li>第三方支付账号：用户在第三方支付机构建立的账户。</li>
<li>银行卡账号：用户的银行卡信息，每个卡对应一个账户。</li>
<li>结算账号：用来支持和第三方支付公司、银行进行结算用。 第三方支付需要为每个商户号建立结算账号；银行需要为借记卡、贷记卡分别建立结算账号（有必要吗？银行卡直连时使用）。</li>
<li>代扣代缴账户：用来支持代扣税款业务。</li>
</ul>
<p>注意，有些第三方信息是不能保存的，如信用卡的CV号等。</p>
<h3>三层身份模型</h3>
<p>从使用层面，三户模型更加适合交易类网站，三层身份模型可能更加适合社交性质的网站。三层身份模型将用户分层三个层次，分别为：账户标识符，登录标识符和公开标识符。翻译成大白话可以是：账户ID、登陆账号、昵称。</p>
<p><img src="https://www.biaodianfu.com/wp-content/uploads/2020/09/the-tripartite-identity-pattern.gif" alt=""></p>
<h4>账户标识符（DB Key）</h4>
<p>从软件工程的角度，需要在数据库中存在一个用户标识(key)来记录每个用户的记录。这个用户标识可能会被用在Cookies或者URL中，这个账户标识符必须是永久的、唯一的。通常是由系统自动生成的一个ID，这个ID不受用户的控制，从用户角度这个标识符应该是不不可见或至少是惰性的，这个标识符不应该与一些公共名称，比如手机号或邮箱。</p>
<h4>登录标识符（会话认证）</h4>
<p>在创建与账户标识符关联的有效会话（Session）时，登陆标识符时必须要的，他们用来从服务中获取授权。通常由唯一的账号/密码对表示（这里的账号可以是邮箱或手机号，也可以是用户选择的用户名）。注意，账户/密码并不是一定需要存在的，比如通过oAuth形式的授权登陆（类似微信登陆、微博登陆等）。</p>
<p>将登陆标识符与账户标识符分开，可以使得用户更加容易的改变登陆方式。由于账户标识符不需要更改，因此可以避免更换登陆方式或登陆账号带来的数据迁移问题。最重要的是，可以提供多个不同登陆标识符附加到单个账户上，从而可以允许服务聚合从多个身份供应商收集的信息。（如授权获得微信或微博的个人信息）</p>
<h4>公开标识符（社会标识）</h4>
<p>与账户标识符和登陆标识符不同，公开标识符标识用户希望如何被服务商的其他用户感知。在线用户的公共标识符通常是复合对象：照片，昵称，可能还有年龄，性别和位置。它为任何观众提供了足够的信息，可以快速解读个人背景。公共标识符通常链接到详细的用户配置文件，其中可以进一步识别身份。公开标识符在某些情况下需要唯一（比如类似微博的@功能），有时是不需要唯一的（如微信的昵称）。</p>
18:T6991,<blockquote>
<p>业务平台是连接业务战略与技术实现的桥梁。好的业务平台架构，不仅要沉淀可复用的基础设施以降低成本，更要通过开放的架构能力支持业务的快速创新与差异化经营。本文从&quot;业务是什么&quot;这一基本问题出发，逐步展开对业务平台架构定位、能力建模、域划分以及架构构建方法的系统性思考。</p>
</blockquote>
<h2>从我们最熟悉的说起——业务是什么？</h2>
<p>不同来源对&quot;业务&quot;有着不同层次的解读：</p>
<ol>
<li>职业上的事务，统称为「业务」——辞海</li>
<li>&quot;业务&quot;更白话一些来说，就是各行业中需要处理的事务，但通常偏向指销售的事务，因为任何公司单位最终仍然是以销售产品、销售服务、销售技术等等为主。&quot;业务&quot;最终的目的是&quot;售出产品，换取利润&quot;。——百度</li>
<li>&quot;Anything that relates to organizing the exchange of goods and services by a business, a governmental institution, or an agency.&quot;——OpenGroup TOGAF Business Architecture</li>
</ol>
<h3>业务的定义</h3>
<p><strong>业务</strong>：企业接受客户订购，并将商品或服务交付给客户的一系列活动的总和，称之为一个业务。</p>
<p>业务的基本特征是<strong>产品+组织</strong>。当产品交付给客户时，面向不同客户、市场、行业，如何解决业务的差异性？答案是<strong>业务身份</strong>。</p>
<p>业务身份是现实业务在系统中给予的唯一编码标识，是基于&quot;业务&quot;差异性划分而形成的系统 ID。业务身份的本质不是为了区分逻辑判断，而是区分需求来源以及规则的适用范围。因此，业务身份应该有全局的一致性。</p>
<h2>业务平台架构的定位</h2>
<h3>从业务内部看，要解决的主要问题</h3>
<table>
<thead>
<tr>
<th>维度</th>
<th>目标</th>
</tr>
</thead>
<tbody><tr>
<td>创新</td>
<td>不断适应市场的业务策略</td>
</tr>
<tr>
<td>低成本</td>
<td>实施成本低</td>
</tr>
<tr>
<td>快速响应</td>
<td>能快速推进，快速试错</td>
</tr>
<tr>
<td>外部资源</td>
<td>易于获得生态内足够的外部资源，如流量、供给、渠道</td>
</tr>
</tbody></table>
<h3>从全局看，怎样支持业务快速发展？</h3>
<table>
<thead>
<tr>
<th>维度</th>
<th>目标</th>
</tr>
</thead>
<tbody><tr>
<td>基础强大</td>
<td>有强大的基础平台支撑，通用能力得到保证</td>
</tr>
<tr>
<td>组装灵活</td>
<td>可以快速选择部分能力，构建适合自身需要的支撑体系</td>
</tr>
<tr>
<td>易于变化</td>
<td>变化牵涉面小，可以快速定制</td>
</tr>
<tr>
<td>自主投入</td>
<td>不受基础平台资源瓶颈限制</td>
</tr>
</tbody></table>
<h3>从技术与业务两个角度看，需要的能力</h3>
<ul>
<li><strong>功能丰富</strong>：靠积累</li>
<li><strong>易于复用</strong>：粒度合适，易于集成（技术兼容）</li>
<li><strong>开放定制</strong>：平台开放（架构开放），运行解耦（部署灵活）、研发过程解耦</li>
<li><strong>信息共享</strong>：概念一致、场景链接</li>
<li><strong>沟通顺畅</strong>：共同的术语、对业务整体的一致认识</li>
</ul>
<h3>被复用或信息共享的前提</h3>
<p>从业务角度看，能够被复用或信息共享需要满足以下前提：</p>
<ul>
<li>核心管理对象的一致性<ul>
<li>概念一致：对象+关系</li>
<li>数据描述一致：主数据</li>
</ul>
</li>
<li>存在一定层次的流程一致性<ul>
<li>关键活动</li>
<li>基本规则</li>
</ul>
</li>
</ul>
<h3>软件复用的四种形式</h3>
<p>从技术的角度，软件怎样被复用？</p>
<table>
<thead>
<tr>
<th>复用形式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>功能复用</td>
<td>一段功能被完整使用</td>
</tr>
<tr>
<td>接口复用</td>
<td>输入输出定义复用，实现逻辑重写</td>
</tr>
<tr>
<td>流程复用</td>
<td>一段控制结构被复用，控制逻辑加上节点</td>
</tr>
<tr>
<td>规则复用</td>
<td>一段判断逻辑被复用</td>
</tr>
</tbody></table>
<blockquote>
<p>复用的前提是业务实质的相似性。如果管理的核心对象存在较大差异，绝大部分情况下，以上复用都没可能。</p>
</blockquote>
<h3>业务平台的能力取决于什么？</h3>
<ul>
<li>是否存在基础的具有共性的关键业务环节</li>
<li>是否存在需要全局共享的关键资源</li>
<li>是否存在需要广泛连接的关键应用</li>
<li>是否存在需要大范围执行的管控规则</li>
<li>是否需要稳定性 SLA</li>
</ul>
<h3>业务平台的价值</h3>
<ul>
<li><strong>降低成本</strong>：通过沉淀可复用的软件基础设施</li>
<li><strong>支持创新</strong>：通过提供开放的基础架构能力，支持创新和差异化经营</li>
<li><strong>全局管控</strong>：通过管理基础数据和基本流程节点，提供全局管控的手段和稳定性保障</li>
</ul>
<h2>业务架构模型分析</h2>
<p>业界对业务架构的描述方式有多种参考模型：</p>
<table>
<thead>
<tr>
<th>模型</th>
<th>来源</th>
</tr>
</thead>
<tbody><tr>
<td>Business Process</td>
<td>TMF、APQC</td>
</tr>
<tr>
<td>Business Capability</td>
<td>Open Group、Gartner</td>
</tr>
<tr>
<td>Value Stream</td>
<td>Open Group</td>
</tr>
<tr>
<td>Business Service</td>
<td>FEA</td>
</tr>
</tbody></table>
<h3>描述业务的三个视角</h3>
<ul>
<li><p><strong>Business Capability（What）</strong>：业务为实现特定目的或结果而可能拥有或交互的特定能力或产能</p>
<blockquote>
<p>A particular ability or capacity that a business may process or exchange to achieve a specific purpose.</p>
</blockquote>
</li>
<li><p><strong>Business Process（How）</strong>：一组有逻辑行为的结构化活动或任务，产生特定的结果、服务或产品</p>
<blockquote>
<p>A set of structured activities or tasks with logical behaviors that produce a specific outcome, service or product.</p>
</blockquote>
</li>
<li><p><strong>Business Value Stream（Why）</strong>：表示一组端到端增值活动集合，这些活动为客户、干系人或者最终用户获得一个总体结果</p>
<blockquote>
<p>A sequence of activities an enterprise undertakes to deliver on a customer request.</p>
</blockquote>
</li>
</ul>
<h3>参考模型的共性</h3>
<p>在推动企业 IT 服务能力的持续演进方面，业界已经有丰富的参考。分析前述参考模型可以看到：</p>
<ul>
<li><strong>顶层视图一致</strong>：不论哪种描述方式，都是先从企业的管理范围做大的划分——基于价值链的分析形成顶级视图，以是否直接服务客户为基准划分不同分类</li>
<li><strong>内容逻辑趋同</strong>：大多讨论都涉及组织、能力、过程的关系</li>
<li><strong>目标一致</strong>：虽然在不同的时期、不同的视角强调的重点不同，但都是希望建立更易于为业务理解的视图，并成为构建 IT 系统的桥梁</li>
</ul>
<h2>业务架构的现状与挑战</h2>
<p>通常，企业架构包括<strong>业务架构、技术架构、应用架构、数据/信息架构</strong>，而业务平台最薄弱的环节往往在于业务架构：</p>
<ul>
<li>已经形成框架，但缺乏对关键概念的确切定义</li>
<li>已经形成平台，但缺乏长期演进的规划指引</li>
<li>已经形成对业务的基础性支撑，但基础能力没有明确的定义</li>
<li>平台团队缺乏对业务的结构化思考框架指引，容易造成团队能力的瓶颈</li>
</ul>
<p>因此，我们首先需要健全业务架构体系。业务架构体系的构建关键在于先要建立<strong>业务视角</strong>。</p>
<h3>什么是业务视角？</h3>
<ul>
<li>用业务发生的方式描述业务：围绕能力、流程与场景描述</li>
<li>将业务现象背后的逻辑进行结构化呈现</li>
<li>强调结果而非方法实现，屏蔽技术细节</li>
</ul>
<h3>如何建立业务视角？</h3>
<ul>
<li>首先要明确业务目标，理解业务含义，知道结构划分的依据</li>
<li>要建立端到端的全流程视角，业务需求能够对应到系统功能</li>
<li>在业务沟通中，统一使用达成共识的业务语言而非技术术语</li>
<li>系统被业务感知的部分要有明确的业务语义以及清晰的边界</li>
</ul>
<h3>业务平台架构的层次结构</h3>
<p>业务平台架构是一个<strong>以流程为基础，以能力为表达</strong>的层次结构：</p>
<table>
<thead>
<tr>
<th>层次</th>
<th>目标</th>
</tr>
</thead>
<tbody><tr>
<td>第一层</td>
<td>明确语义和范围</td>
</tr>
<tr>
<td>第二层</td>
<td>构建完备、正交的业务模型</td>
</tr>
<tr>
<td>第三层</td>
<td>与交付形态相结合，提供服务 SLA</td>
</tr>
</tbody></table>
<p>无论从能力角度，还是从流程角度，都是对企业行为的一种描述方式。我们既可以通过满足的客户需求出发，构建能力的集合，也可以根据流程到企业能力的对应，建立起整体的能力框架或过程框架。</p>
<h2>关于域（Domain）的思考</h2>
<p>域是一个广泛被使用的词，但定义也很宽泛。领域建模这个词很熟悉，但具体&quot;领域&quot;是什么，在实践中并没有可以判定的简单标准。域常常被理解为不同的场景：功能域、过程域、数据域。</p>
<p>如果从 OO（面向对象）的核心思想出发，则可以将域做一个统一认知：</p>
<ul>
<li><strong>功能</strong>是对象行为的外部表现，但作为域的聚合依据是对象</li>
<li><strong>对象</strong>的行为和数据是不可分开的，过程是对象行为的执行过程</li>
</ul>
<p>基于以上认知，域的概念可以统一为**「信息域」**——数据是信息的载体，信息是对数据的语义解释。因此，<strong>领域建模就是找出问题范围内的对象及其关系，根据对象间关系的紧密程度，来确定是否属于一个域。</strong></p>
<h3>价值链视角下的能力划分</h3>
<p>价值链把企业的能力划分为<strong>核心能力</strong>以及<strong>辅助能力</strong>，实质是以客户为中心，区分客户与企业两个角色。根据 TMF-eTOM 的划分方式，在核心流程进一步细分基础设施和战略、运营，和生产不直接相关的活动都定义为企业管理。</p>
<h2>能力的语义分析——5W1H 的逻辑</h2>
<p>对能力进行语义分析，可以借助经典的 5W1H 框架：</p>
<table>
<thead>
<tr>
<th>维度</th>
<th>关注点</th>
<th>层次</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Why</strong></td>
<td>价值</td>
<td>高层次</td>
</tr>
<tr>
<td><strong>What</strong></td>
<td>目标</td>
<td>高层次</td>
</tr>
<tr>
<td><strong>When</strong></td>
<td>时间</td>
<td>细节层次</td>
</tr>
<tr>
<td><strong>Where</strong></td>
<td>地点</td>
<td>细节层次</td>
</tr>
<tr>
<td><strong>Who</strong></td>
<td>参与人</td>
<td>细节层次</td>
</tr>
<tr>
<td><strong>How</strong></td>
<td>方式方法</td>
<td>细节层次</td>
</tr>
</tbody></table>
<p>当我们在较高层次谈能力，往往是在谈 <strong>Why</strong> 和 <strong>What</strong>；在较低或细节的层次谈能力，则往往强调的是 <strong>3W1H</strong>（When、Where、Who、How）——即做的程度和特性。</p>
<h3>能力的两种描述形式</h3>
<p>能力的描述通常有两种形式：</p>
<p><strong>形式一：按照目标描述</strong>——做什么以及达到的目标。</p>
<p><strong>形式二：按照特性描述</strong>——特性往往体现为两类：</p>
<ol>
<li><strong>对象属性值的组合</strong>：值的组合往往体现为场景。例如&quot;担保交易&quot;是一个能力描述，&quot;担保&quot;本身是交易的分类特性，描述的是交易具有的特点。</li>
<li><strong>过程执行的非功能特性</strong>：如时间、空间等。例如&quot;秒杀&quot;描述的是交易的时间特性；&quot;店铺红包&quot;描述的是红包使用的范围（空间特性）。</li>
</ol>
<h3>能力与场景的结合</h3>
<p>能力的特性描述实际是场景切分的方式。一旦进入场景，就是离散的结构；而按照流程的能力划分方式，则可以是逐步细化的方式，会形成<strong>树状的结构</strong>。</p>
<p>如果我们把二者结合并加以规范，就能形成既满足 MECE（Mutually Exclusive, Collectively Exhaustive）原则，又能把两种特点有效体现的描述方式：</p>
<ol>
<li>按照端到端流程完成初始能力描述</li>
<li>找到流程的各个环节，分解成不同的能力</li>
<li>在流程各个环节里，找出关键参数，描述业务的适应能力</li>
<li>找出关键的非功能性的特性</li>
<li>把流程各个环节较为固定的组合找出来</li>
</ol>
<h2>能力分析 vs 流程分析</h2>
<ul>
<li><strong>能力</strong>：要达到一个目的，得到一个结果。如果是服务于客户，从客户的角度看，就是&quot;我&quot;帮客户完成了一件什么事情。</li>
<li><strong>流程</strong>：我要干一件什么样的事情，其步骤是什么，体现的是做的过程。</li>
</ul>
<p>从划分的结果来看，能力划分和流程划分是一致的，但从思考的角度看是不同的。从划分的确定性看，因为角色有限，能力从结果和目标的角度出发，避开路径的复杂性，有更强的确定性。</p>
<h2>业务建模 vs 业务架构</h2>
<p>在独立讲述流程建模或者能力建模的论述中，都强调用业务的语言，构建符合业务习惯的成果。业务建模只强调逻辑的完整性，但是在以 IT 实现为目标的前提下，业务建模和 IT 实现之间必须建立简单的对应关系。</p>
<p>无论是能力建模或者过程建模，最终要与信息模型建立映射关系。在业务分散而平台支撑要统一的情况下，也可以看作是 IT 在寻找和业务的共同语言。</p>
<h2>商业能力的划分</h2>
<h3>划分的核心原则</h3>
<p>能力划分的核心是<strong>围绕客户，以是否与客户诉求直接相关作为基准</strong>。在顶层视图中，划分能力和流程的视角是一致的——无论流程视角还是能力视角，都要找出我们能为客户做什么。</p>
<p>因此，我们可以区分<strong>三类能力</strong>：</p>
<ol>
<li><strong>客户销售与服务能力</strong>——直接面向客户</li>
<li><strong>支撑能力</strong>——为前端能力提供基础保障</li>
<li><strong>企业管理能力</strong>——支撑组织自身运转</li>
</ol>
<h3>能力划分的逻辑</h3>
<p>能力划分是自顶向下的逻辑分解过程。其出发点首先是<strong>角色分析</strong>，以满足角色的诉求为目的。因此，顶层的划分都是以角色的诉求为基础，本质是场景（或流程）的划分。</p>
<table>
<thead>
<tr>
<th>能力类型</th>
<th>划分逻辑</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>前端能力</td>
<td>按消费逻辑划分</td>
<td>直接服务于客户需求，按客户消费场景进行顶层划分</td>
</tr>
<tr>
<td>后端支撑能力</td>
<td>按资源/角色分类</td>
<td>服务于经营者，因内部角色分散，形成面向资源的分散流程</td>
</tr>
</tbody></table>
<p>场景的细分本身可以构成能力细分的逻辑基础，但仍需要找到场景细分的逻辑。后端支撑能力本质是服务于经营者，可以从经营者的诉求进行划分。但因为内部角色的分散，难以在顶层形成贯穿全局的流程主线，就会形成面向资源的分散流程。这里的<strong>资源，本质就是我们所说的域</strong>。</p>
<p>这代表了一类细分的思路：在场景细分的基础上，通过资源的分类完成下一级的细分。即便到了资源的分类层次，仍有可能进一步细分，这又会回到场景划分的逻辑。所以，<strong>业务能力建模的过程也是在不断寻找不同层次的能力切分逻辑的过程</strong>。</p>
<p>从全局看，核心是以客户为中心进行能力的划分。实际上，每一部分能力都服务于生态中的某个特定角色，所以在能力的描述上，直接满足的是当前角色的价值要求，间接地通过以客户为中心的视角进行原则性校验。</p>
<p><img src="/images/blog/engineering/business-image_4_1.png" alt="企业能力生态闭环"></p>
<ul>
<li>企业的能力围绕&quot;客户、企业自身、合作伙伴&quot;的生态形成闭环</li>
<li>前端围绕满足客户需求</li>
<li>后端分为满足生产要素管理和满足企业自身管理</li>
<li>企业管理暂不涉及</li>
</ul>
<p><img src="/images/blog/engineering/business-image_4_2.png" alt="能力划分全景图"></p>
<h3>后端支撑能力与企业管理能力</h3>
<p><strong>后端支撑能力：</strong></p>
<ul>
<li>客户管理</li>
<li>产品管理（PLM）</li>
<li>合作伙伴管理</li>
<li>营销活动管理</li>
<li>账单与收入管理</li>
<li>资源管理</li>
</ul>
<p><strong>企业管理能力：</strong></p>
<ul>
<li>人力资源</li>
<li>财务</li>
<li>技术发展</li>
<li>基础建设</li>
<li>法务</li>
<li>……</li>
</ul>
<h3>从概念性的能力到软件实现的层次</h3>
<p><img src="/images/blog/engineering/business-image_4_3.png" alt="能力到软件实现的映射"></p>
<p><strong>能力的表现形式：</strong></p>
<ul>
<li><strong>高层的能力</strong>：应该是逻辑的表达，对应于软件的整体或可独立交付的部分</li>
<li><strong>低层的能力</strong>：应该和软件的外在存在形式关联，如分布式环境中的服务接口、SDK 中定义的接口</li>
</ul>
<p><strong>能力的划分原则：</strong></p>
<p>能力是围绕以完成客户诉求为目标来划分的，完成一个能力可能需要多个领域对象的协作。能力的细分有横向和纵向的划分方式，未必代表软件实现的粒度细分，所以要建立能力和软件实现的映射关系。但在能力粒度上，一定需要和软件的交付物有一致并且明确的边界。</p>
<h2>能力、流程、域的关系</h2>
<p>三者的划分依据各有不同，但最终需要建立映射：</p>
<table>
<thead>
<tr>
<th>概念</th>
<th>划分依据</th>
<th>特点</th>
</tr>
</thead>
<tbody><tr>
<td>能力</td>
<td>按照完成目标划分</td>
<td>面向结果</td>
</tr>
<tr>
<td>流程</td>
<td>按照执行过程划分</td>
<td>面向步骤</td>
</tr>
<tr>
<td>域</td>
<td>按照实体聚合切分</td>
<td>面向对象</td>
</tr>
</tbody></table>
<p>业务流程是业务感知结果的流程，系统流程是执行步骤的划分。域内可以有流程，域的多项能力可能对应细分流程的多个步骤，不一定有必然的先后顺序，也可能是离散的能力组合。</p>
<p>域和能力之间也需要在一定的粒度上建立映射关系，否则会造成在域和能力都有很多层次，并在多个层次间建立复杂的映射。</p>
<h2>商业能力层的设计</h2>
<h3>商业能力层和域内的关系</h3>
<p>商业能力是客户可直接感知的能力。越是面向客户直接交互的层次，在技术上越难以限制其差异性，可能会与需求直接映射；越是趋近技术实现的层次，越是需要更高的抽象，以间接满足需求。</p>
<p>商业能力层提供流程性的封装，在顶层按照与客户的交互场景划分，并结合域的划分进行分解：</p>
<ul>
<li><strong>商业能力层</strong>：以提高交互场景的合理性和对外的灵活性为目标，关注面向客户体验的逻辑实现</li>
<li><strong>域内</strong>：以实现领域内的接口复用为目的，提供合适粒度的接口，与商业能力层确认概念模型</li>
</ul>
<blockquote>
<p>商业能力团队应该首先是一个<strong>设计团队</strong>，其次才是一个实现团队。设计应该是和各域一起探讨的过程，商业能力要限制向下层过度延伸，也要迫使下层更注重域内抽象。</p>
</blockquote>
<p>在设计过程中，逻辑分解应该尽量形成在各域的独立逻辑，然后组合成对外的交互逻辑。最外层交互所依赖的服务都在商业能力层实现封装，应该以业务设计结果为准，而不是技术设计。对外的扩展点，都在商业能力层定义和体现。</p>
<h3>商业能力在软件结构上的分层</h3>
<p>如果对外提供的就是商业能力，那么域和商业能力的边界到底在哪里？</p>
<ul>
<li>所有在 SDK、RPC 接口中对外提供调用或者是 SPI 提供实现的，都在商业能力层定义</li>
<li>需要提供给外部使用或扩展的（这里不包含界面层对后端的调用，界面是软件的一部分）</li>
</ul>
<h3>如何界定&quot;内&quot;和&quot;外&quot;？</h3>
<p>&quot;内&quot;与&quot;外&quot;的界定取决于商业能力的服务对象和组织边界：</p>
<table>
<thead>
<tr>
<th>视角</th>
<th>&quot;内&quot;</th>
<th>&quot;外&quot;</th>
</tr>
</thead>
<tbody><tr>
<td>业务平台 vs 业务方</td>
<td>业务平台</td>
<td>业务方</td>
</tr>
<tr>
<td>整个中台</td>
<td>所有中台能力</td>
<td>中台以外</td>
</tr>
<tr>
<td>企业内外</td>
<td>企业</td>
<td>客户</td>
</tr>
</tbody></table>
<p>如果考虑放大到所有提供中台能力的都和业务平台同等的地位，那么整个中台就是内——但这样就要有整个中台的统一对外组织和架构标准。</p>
<h3>商业能力和域的分层及域间关系</h3>
<p>域间是否允许调用？调用规则如下：</p>
<table>
<thead>
<tr>
<th>调用类型</th>
<th>是否允许</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>依赖另一个域的实体对象信息的查询调用</td>
<td><strong>允许</strong></td>
<td>不限制下层的信息查询</td>
</tr>
<tr>
<td>依赖另一个域的判断的调用</td>
<td><strong>禁止</strong></td>
<td>交给上层去集成</td>
</tr>
<tr>
<td>嵌入另一个域的处理环节的调用</td>
<td><strong>禁止</strong></td>
<td>限制下层的逻辑蔓延</td>
</tr>
</tbody></table>
<p>核心原则是：<strong>上层进行逻辑和控制结构的组装，不限制下层的信息查询，但限制下层的逻辑蔓延。</strong></p>
<p>对于下层能够独立完成的判断逻辑或处理环节，鼓励下层去做。但对象必须有属主域，判断应该是本域的关键对象的行为判断，而不能是跨越边界。只有直接被认为是对象的直接属性的内容，才被认为是查询，所以对于一个域要有基本的概念模型。</p>
<h3>商业能力的表达</h3>
<p>对组织边界外的外部系统服务，都是商业能力封装；对于和客户直接交互的、提供给界面的，都是商业能力。</p>
<p>商业能力本身可以分成两类：</p>
<ol>
<li><strong>领域内服务</strong>：单域完成的能力</li>
<li><strong>跨域服务</strong>：可以作为独立的分类</li>
</ol>
<p>从上下级关系看，上级的逻辑必然覆盖下层的逻辑，建立能力树，是给用户导航的方式。</p>
<h2>基于企业架构，构建业务架构</h2>
<p>要想构建业务平台架构，我们需要有一套行之有效的构建方法论。方法论的构成包括：<strong>原理过程 + 表示法 + 工具</strong>。</p>
<p>能力地图代表业务架构，概念模型代表信息架构。对于多数业务平台，技术架构一般已经有较为明确的选择。所以，业务平台亟需构建的是除技术架构之外的泛&quot;业务架构&quot;。</p>
<p>从企业管理维度上看，企业架构在业务平台通常可以解决的问题包括：</p>
<ul>
<li><strong>研发投资的价值识别</strong></li>
<li><strong>架构演进的组织方法</strong></li>
<li><strong>组织的职责划分</strong></li>
</ul>
<h3>构建架构体系：战略-模式-能力-过程</h3>
<p>业务架构的边界来源于战略输入。从能力的角度，产品目录是业务架构的延续；从实现的角度，产品目录是应用架构的延续。在交互层面，通过合适的集成手段，实现应用功能面向用户的有效整合。</p>
<p>应用架构的边界和域的边界有内在的关联，可以通过自顶向下的讨论以及循环迭代完成演进。</p>
<h3>构建能力地图</h3>
<ol>
<li><strong>确定架构定义及结构描述</strong><ul>
<li>分层划分的规则确定</li>
</ul>
</li>
<li><strong>现状描述</strong><ul>
<li>能力地图的草稿初建</li>
</ul>
</li>
<li><strong>搜集关键场景，确定目标架构</strong><ul>
<li>补充关键演进场景</li>
</ul>
</li>
<li><strong>Gap 分析</strong></li>
<li><strong>演进计划</strong></li>
<li><strong>构建一个基础的完备正交集合</strong></li>
<li><strong>构建不同场景的视图</strong><ul>
<li>外部客户交付关键能力视图</li>
<li>内部业务的热点关键能力视图</li>
</ul>
</li>
</ol>
<h3>构建概念模型</h3>
<p><strong>现状搜集：</strong></p>
<ul>
<li>已经被广泛引用的概念、实体</li>
<li>已经被广泛使用的术语</li>
<li>已经被相对固化的流程节点</li>
<li>已经广泛使用的场景</li>
</ul>
<p><strong>未来场景搜集：</strong></p>
<ul>
<li>战略输入</li>
<li>业务规划</li>
</ul>
<p><strong>建模：</strong></p>
<ul>
<li>域划分</li>
<li>模型定义</li>
<li>耦合验证</li>
</ul>
<p><strong>演进计划</strong></p>
<h2>总结</h2>
<p>业务平台架构的构建是一个系统性工程，其核心在于找到业务与技术之间的共同语言。回顾全文，可以提炼出以下关键认知：</p>
<ol>
<li><strong>业务身份是差异性管理的基础</strong>——通过全局一致的业务身份，区分需求来源和规则适用范围</li>
<li><strong>能力、流程、域三位一体</strong>——能力面向结果，流程面向过程，域面向对象，三者需要在合适的粒度上建立映射</li>
<li><strong>以客户为中心的划分逻辑</strong>——无论前端能力还是后端支撑，最终都服务于客户价值的交付</li>
<li><strong>商业能力层是关键的架构抽象</strong>——它既要限制向下层的过度延伸，又要迫使下层注重域内抽象</li>
<li><strong>域间调用的原则</strong>——允许信息查询，禁止逻辑蔓延，上层负责编排</li>
<li><strong>业务架构需要持续演进</strong>——通过能力地图和概念模型的迭代构建，逐步完善架构体系</li>
</ol>
<p>好的业务平台架构不是一蹴而就的，它需要在实践中不断验证和演进。关键是始终保持以业务视角为出发点，用结构化的方法将业务逻辑转化为可落地的技术架构。</p>
5:["$","article",null,{"className":"min-h-screen","children":["$","div",null,{"className":"mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 py-8","children":["$","div",null,{"className":"rounded-2xl shadow-2xl border border-gray-200 hover:shadow-3xl transition-all duration-300 p-8 sm:p-12","children":[["$","header",null,{"className":"mb-8","children":[["$","nav",null,{"className":"flex items-center gap-1 text-sm mb-4","children":[["$","$L13",null,{"href":"/blog/page/1","className":"text-gray-500 hover:text-blue-600 transition-colors","children":"博客"}],["$","span",null,{"className":"text-gray-300","children":"/"}],["$","$L13",null,{"href":"/blog/category/engineering/page/1","className":"text-gray-500 hover:text-blue-600 transition-colors","children":"Engineering"}],[["$","span",null,{"className":"text-gray-300","children":"/"}],["$","$L13",null,{"href":"/blog/category/engineering/domain/page/1","className":"text-blue-600 hover:text-blue-700 transition-colors","children":"领域建模"}]]]}],["$","div",null,{"className":"flex items-center mb-6","children":["$","div",null,{"className":"inline-flex items-center px-3 py-1.5 bg-gray-50 text-gray-600 rounded-md text-sm font-normal","children":[["$","svg",null,{"className":"w-4 h-4 mr-2 text-gray-400","fill":"none","stroke":"currentColor","viewBox":"0 0 24 24","children":["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","strokeWidth":2,"d":"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}]}],["$","time",null,{"dateTime":"2024-03-03","children":"2024年03月03日"}]]}]}],["$","h1",null,{"className":"text-4xl font-bold text-gray-900 mb-6 text-center","children":"解析三户模型及建立账户模型"}],["$","div",null,{"className":"flex flex-wrap gap-2 mb-6 justify-center","children":[["$","$L13","业务架构",{"href":"/blog/tag/%E4%B8%9A%E5%8A%A1%E6%9E%B6%E6%9E%84/page/1/","className":"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-gray-900 transition-colors","children":"业务架构"}],["$","$L13","三户模型",{"href":"/blog/tag/%E4%B8%89%E6%88%B7%E6%A8%A1%E5%9E%8B/page/1/","className":"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-gray-900 transition-colors","children":"三户模型"}],["$","$L13","账户体系",{"href":"/blog/tag/%E8%B4%A6%E6%88%B7%E4%BD%93%E7%B3%BB/page/1/","className":"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-gray-900 transition-colors","children":"账户体系"}]]}]]}],["$","div",null,{"className":"max-w-5xl mx-auto","children":["$","$L14",null,{"content":"$15"}]}],["$","$10",null,{"fallback":["$","div",null,{"className":"mt-12 pt-8 border-t border-gray-200","children":"加载导航中..."}],"children":["$","$L16",null,{"globalNav":{"prev":{"slug":"engineering/domain/用户系统设计——三户模型及三层身份模型","title":"用户系统设计——三户模型及三层身份模型","description":"三户模型最早是在增强型电信运营图（Enhanced Telecom Operations Map，eTOM）中提出，在电信行业中得到广泛使用。 三户指客户（Customer）、用户（User）和账户(Account)。eTOM 引入是电信行业营销模型转向“以客户为中心”的理念而产生的成果。围绕客户建...","pubDate":"2024-03-01","tags":["业务架构","用户系统","三户模型"],"heroImage":"$undefined","content":"$17"},"next":{"slug":"engineering/architecture/关于业务平台架构的思考","title":"关于业务平台架构的思考","description":"从业务的本质出发，探讨业务平台架构的定位、能力建模方法、域的划分逻辑，以及如何基于企业架构思维构建可持续演进的业务架构体系。","pubDate":"2024-03-04","tags":["业务架构","平台化","架构设计","领域建模","企业架构"],"heroImage":"$undefined","content":"$18"}},"tagNav":{"业务架构":{"prev":"$5:props:children:props:children:props:children:2:props:children:props:globalNav:prev","next":"$5:props:children:props:children:props:children:2:props:children:props:globalNav:next"},"三户模型":{"prev":"$5:props:children:props:children:props:children:2:props:children:props:globalNav:prev","next":null},"账户体系":{"prev":null,"next":null}}}]}],["$","$L19",null,{}]]}]}]}]
8:null
c:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
7:null
a:{"metadata":[["$","title","0",{"children":"解析三户模型及建立账户模型 - Skyfalling Blog"}],["$","meta","1",{"name":"description","content":"账户体系是支付系统的基础，它的设计直接影响整个系统的特性。这里探讨如何针对电子商务系统的账户体系设计。我们从一些基本概念开始入手，了解怎么建模。三户模型最早是在增强型电信运营图（Enhanced Telecom Operations Map，eTOM）中提出，在电信行业中得到广泛使用。"}],["$","meta","2",{"property":"og:title","content":"解析三户模型及建立账户模型"}],["$","meta","3",{"property":"og:description","content":"账户体系是支付系统的基础，它的设计直接影响整个系统的特性。这里探讨如何针对电子商务系统的账户体系设计。我们从一些基本概念开始入手，了解怎么建模。三户模型最早是在增强型电信运营图（Enhanced Telecom Operations Map，eTOM）中提出，在电信行业中得到广泛使用。"}],["$","meta","4",{"property":"og:type","content":"article"}],["$","meta","5",{"property":"article:published_time","content":"2024-03-03"}],["$","meta","6",{"property":"article:author","content":"Skyfalling"}],["$","meta","7",{"name":"twitter:card","content":"summary"}],["$","meta","8",{"name":"twitter:title","content":"解析三户模型及建立账户模型"}],["$","meta","9",{"name":"twitter:description","content":"账户体系是支付系统的基础，它的设计直接影响整个系统的特性。这里探讨如何针对电子商务系统的账户体系设计。我们从一些基本概念开始入手，了解怎么建模。三户模型最早是在增强型电信运营图（Enhanced Telecom Operations Map，eTOM）中提出，在电信行业中得到广泛使用。"}],["$","link","10",{"rel":"shortcut icon","href":"/favicon.png"}],["$","link","11",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}],["$","link","12",{"rel":"icon","href":"/favicon.png"}],["$","link","13",{"rel":"apple-touch-icon","href":"/favicon.png"}]],"error":null,"digest":"$undefined"}
12:{"metadata":"$a:metadata","error":null,"digest":"$undefined"}
