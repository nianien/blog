<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/e4af272ccee01ff0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/0a7d53676a1eb136.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-f7d11fc743a8cf38.js"/><script src="/_next/static/chunks/4bd1b696-be40ecc358c69ec3.js" async=""></script><script src="/_next/static/chunks/684-ed6d2eeb89009696.js" async=""></script><script src="/_next/static/chunks/main-app-1050779d59efeaf4.js" async=""></script><script src="/_next/static/chunks/874-f2e46e41114bd221.js" async=""></script><script src="/_next/static/chunks/app/layout-c432974c723daafe.js" async=""></script><script src="/_next/static/chunks/968-bf93abe4de13a5fc.js" async=""></script><script src="/_next/static/chunks/app/blog/%5B...slug%5D/page-26cc6d1a0064a78b.js" async=""></script><meta name="next-size-adjust" content=""/><title>用户系统设计——三户模型及三层身份模型 - Skyfalling Blog</title><meta name="description" content="三户模型最早是在增强型电信运营图（Enhanced Telecom Operations Map，eTOM）中提出，在电信行业中得到广泛使用。 三户指客户（Customer）、用户（User）和账户(Account)。eTOM 引入是电信行业营销模型转向“以客户为中心”的理念而产生的成果。围绕客户建..."/><meta property="og:title" content="用户系统设计——三户模型及三层身份模型"/><meta property="og:description" content="三户模型最早是在增强型电信运营图（Enhanced Telecom Operations Map，eTOM）中提出，在电信行业中得到广泛使用。 三户指客户（Customer）、用户（User）和账户(Account)。eTOM 引入是电信行业营销模型转向“以客户为中心”的理念而产生的成果。围绕客户建..."/><meta property="og:type" content="article"/><meta property="article:published_time" content="2024-03-01"/><meta property="article:author" content="Skyfalling"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="用户系统设计——三户模型及三层身份模型"/><meta name="twitter:description" content="三户模型最早是在增强型电信运营图（Enhanced Telecom Operations Map，eTOM）中提出，在电信行业中得到广泛使用。 三户指客户（Customer）、用户（User）和账户(Account)。eTOM 引入是电信行业营销模型转向“以客户为中心”的理念而产生的成果。围绕客户建..."/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><link rel="icon" href="/favicon.svg"/><script>document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__className_f367f3"><div hidden=""><!--$--><!--/$--></div><div class="min-h-screen flex flex-col"><header class="bg-[var(--background)]"><nav class="mx-auto flex max-w-7xl items-center justify-between p-6 lg:px-8" aria-label="Global"><div class="flex lg:flex-1"><a class="-m-1.5 p-1.5" href="/"><span class="sr-only">Skyfalling Blog</span><span class="text-2xl font-bold text-gray-900">Skyfalling</span></a></div><div class="flex lg:hidden"><button type="button" class="-m-2.5 inline-flex items-center justify-center rounded-md p-2.5 text-gray-700"><span class="sr-only">打开主菜单</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="h-6 w-6"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path></svg></button></div><div class="hidden lg:flex lg:gap-x-12"><a class="text-base font-semibold leading-6 transition-colors text-gray-900 hover:text-blue-600" href="/">首页</a><a class="text-base font-semibold leading-6 transition-colors text-blue-600 border-b-2 border-blue-600 pb-1" href="/blog/">博客</a><a class="text-base font-semibold leading-6 transition-colors text-gray-900 hover:text-blue-600" href="/about/">关于</a></div><div class="hidden lg:flex lg:flex-1 lg:justify-end"><a class="text-base font-semibold leading-6 transition-colors text-gray-900 hover:text-blue-600" href="/contact/">联系 <span aria-hidden="true">→</span></a></div></nav></header><main class="flex-1"><article class="min-h-screen"><div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 py-8"><div class="rounded-2xl shadow-2xl border border-gray-200 hover:shadow-3xl transition-all duration-300 p-8 sm:p-12"><header class="mb-8"><div class="flex items-center mb-6"><div class="inline-flex items-center px-3 py-1.5 bg-gray-50 text-gray-600 rounded-md text-sm font-normal"><svg class="w-4 h-4 mr-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg><time dateTime="2024-03-01">2024年03月01日</time></div></div><h1 class="text-4xl font-bold text-gray-900 mb-6 text-center">用户系统设计——三户模型及三层身份模型</h1><div class="flex flex-wrap gap-2 mb-6 justify-center"><a class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-gray-900 transition-colors" href="/blog/tag/%E4%B8%9A%E5%8A%A1%E6%9E%B6%E6%9E%84/page/1/">业务架构</a></div></header><div class="max-w-5xl mx-auto"><div class="prose prose-lg prose-gray mx-auto max-w-none prose-headings:text-gray-900 prose-headings:font-bold prose-p:text-gray-700 prose-p:leading-relaxed prose-a:text-blue-600 prose-a:no-underline hover:prose-a:text-blue-700 prose-strong:text-gray-900 prose-strong:font-semibold prose-blockquote:border-l-4 prose-blockquote:border-blue-500 prose-blockquote:bg-blue-50 prose-blockquote:py-2 prose-blockquote:px-4 prose-blockquote:rounded-r-lg prose-ul:list-disc prose-ol:list-decimal prose-li:text-gray-700 prose-hr:border-gray-300"><h1>用户系统设计:三户模型&amp;三层身份模型</h1>
<h3>三户模型</h3>
<p>三户模型最早是在增强型电信运营图（Enhanced Telecom Operations Map，eTOM）中提出，在电信行业中得到广泛使用。 三户指客户（Customer）、用户（User）和账户(Account)。eTOM 引入是电信行业营销模型转向“以客户为中心”的理念而产生的成果。围绕客户建立用户和账户。这三个是相互关联的实体，这种关联只是一个归属和映射的关系，而三个实体本身是相互独立的，分别是体现完全不同的几个域的信息，<strong>客户</strong>是体现了<strong>社会域</strong>的信息，<strong>用户</strong>体现了<strong>业务域</strong>的信息，<strong>账户</strong>体现的是<strong>资金域</strong>的信息。</p>
<ul>
<li>客户（customer）：是指客户（自然人、公司、集团公司）的基本资料信息。例如自然人的姓名、手机号、身份证、邮箱地址等等；公司的五证一照、行业、联系人、网站地址、通讯地址等等。如无特指，一般客户指个人客户。</li>
<li>用户（user）：指客户在系统的登录账号信息，包括账号、密码、人员权限、角色等等。对应的，法人客户在系统中注册后，被称之为商户。</li>
<li>账户（account）：指客户在系统的虚拟账户，主要与交易记账相关。</li>
</ul>
<p><img src="https://www.biaodianfu.com/wp-content/uploads/2020/09/customer-user-account.png" alt=""></p>
<p>以电信业务为例：</p>
<ul>
<li>客户：人</li>
<li>用户：电信产品的实例表现</li>
<li>账户：付费的账号</li>
</ul>
<p>假设张三是中国典电信的一个客户，张三办理了一个手机SIM卡和一个宽带业务。其中手机SIM卡和宽带业务分别作为一个用户存在（电信产品实例）。下面还有一个账户的概念，账户是用户进行付费的。一般情况，一个用户只有一个账户，以上例为例，张三有一个账户，为手机号和宽带付费。当然，有的人可能存在多个账户，例如手机号是一个账户，宽带是是一个账户。</p>
<p>总结一下，一个客户（张三）可以有多个用户（一个手机号和一个宽带业务），但一个用户只能归属于一个客户。一个客户可以用多个账户，但一个账户也只能归属于一个客户。账户和用户的关系比较复杂，一般情况，一个账户可以给多个用户付费，但也允许，一个用户的不同费用由多个账户付费，所以账户和用户之间是多对多的关系。</p>
<h4>客户</h4>
<p>客户是一个社会化的概念，一个自然人或一个法人就称之为一个客户，法人客户既可以是一个企业，也可以是与这个企业、集团相关的自然人客户，可以称之为一个集团客户组。</p>
<p>客户可分为个人客户，企业客户。一个客户可以包含多个用户，客户通过唯一的客户标识来确定。客户描述一个客户的自然属性，客户可以和用户一一对应，也可以和用户一对多。<strong>即使不使用业务，也可能存在客户</strong>，因为客户是自然存在的。客户信息包含客户名，地址，邮政编码，性别，年龄，职业，证件号码等等信息，是自然存在的信息。</p>
<p><strong>个人客户</strong></p>
<p>在互联网系统中，一般是用户先注册，先有用户，然后补充客户身份信息。也就是客户身份信息是在运行过程中逐步完善的。在电信体系或银行体系，客户的主键通常是证件号（如身份证），将所有相同的证件视为同一客户。在互联网行业通常是将手机号识别为主键（<strong>注意：手机号有注销、更换等问题</strong>），这里面就有一个关键业务，既然相同证件的证件号或手机号会识别成一个客户，当相同的证件号或手机号进入系统时，系统是如何处理的？当然是合成一个了，这个过程叫做客户归并，即：将客户合成同一个客户号的过程，我们称为归并。归并是有风险的，所以需要一些<strong>鉴权手段</strong>来处理。</p>
<p>在互联网应用中，一个系统中的生命周期如下：</p>
<p><img src="https://www.biaodianfu.com/wp-content/uploads/2020/09/customer.png" alt=""></p>
<p>正常的互联网站点一般只有正常和禁入2种状态，银行业可能还会包含冻结和止付状态（以司法协查为例，某个客户被协查以致账户冻结，需要冻结该客户下所有资金账户，这些账户都被止付）。</p>
<p>注意在这个流程中<strong>没有销户的状态</strong>。 这是为了<strong>支持历史业务的处理</strong>，客户一般不做销户。 此外这个流程和支付账户的流程比较类似，这是为了方便在客户层面做账户控制。</p>
<p><strong>存在问题，用户手机号更换带来的身份识别不能解决。</strong></p>
<p><strong>企业客户</strong></p>
<p>企业客户相对个人客户来说比较复杂点，但三户模型仍然适用。企业客户是一个组织，其账户必然是组织授权内部人员去操作。但是这个操作人，同个人客户一样，只是系统的使用者，即用户。企业的资金比较大，并且有严格的业务流程，所以在系统使用上，一般是多个用户操作一个或多个资金账户。这种关系本身来说，也是一种授权关系，企业授权相应的用户来操作特定的资金账户，只不过为了管理方便，可以引入角色管理机制来实现。对于支付公司来说，企业客户通常都是发展商户过程中产生的。企业客户的识别同个人客户识别也是一样的，通过企业证件来统一识别。相同的企业证件号归并到同一个企业客户下面。建立企业客户的好处在于：</p>
<ul>
<li>有些企业本身只开通了企业服务业务，而不开通商户服务</li>
<li>一个企业可以开通多个商户，企业客户是这些多个商户的统计口径</li>
</ul>
<h4>用户</h4>
<p>用户是在产品基础上产生的实体。如果说一个客户使用了多个产品，那么一个客户就会对应好几个用户（即产品）。</p>
<p><strong>个体用户</strong></p>
<p>用户与资金账户之间我们可以抽象出一种授权关系，凡是授权用户，都可以操作资金账户，当然，这种授权包括客户自己的用户。用户的建立比较简单，一般自助注册后就可以生成用户实体了。</p>
<p>用户的生命周期如下：</p>
<p><img src="https://www.biaodianfu.com/wp-content/uploads/2020/09/user.png" alt=""></p>
<p>如果用户想要销户，收到销户申请后，不能直接销户，客户是通过用户来进行资金账户的管理与操作的，所以，此时有个确认过程，要求各业务系统确认此用户下的所有账户是否可以销户，如果没有问题，先销资金账户，当用户下的所有资金账户都销户完毕，再销用户，用户销户完成后，会释放出此用户占用的资源，如注册手机号。</p>
<p>在互联网环境比较多的场景是用户更新手机号，用户更新手机号的时候涉及到的两个手机号都需要验证。需要注意的是， 更新手机号需要涉及到更新客户ID。</p>
<p>用户除了生命周期状态外，还有一个管理状态，比如锁定，从现实模型中来说，这个是不应该放在用户层面的而是放在账户层面上的，但互联网模式下，一个用户有多个资金账户，为了用户体验，把这些放在了用户层面上了，就如同支付密码放在用户层面上一样。</p>
<p><strong>商户</strong></p>
<p>商户是企业客户的一个业务影子，或是看成资金账户分组的一个手段。商户是客户一个外围业务，如果把它看成用户平级层面也是可以的，即：此商户所有业务产生的资金进入到一个分类资金账户里。不论怎么说，一个企业不论开多少个商户，每个商户又开通多少个资金账户，都改变不了资金账户的归属关系，它是现实客户这个实体的。</p>
<h4>账户</h4>
<p>账户的概念起源于金融业，只是一个客户存放资金的实体，目的是为选择的产品付费。一个客户可以拥有一个账户也可以拥有多个账户，账户上的资金可以为客户本人的用户付费，也可以为其他客户的用户付费，这种付费关系需要一个付费规则进行关联。</p>
<p>既然账户关系到付费规则，必然会引出账单的概念。一般来首先要生成用户账单，账单应该归属于用户。</p>
<p>账单分为两级，客户账单和用户账单：</p>
<ul>
<li>客户账单是根据用户账单按照规则进行简单的算术加和得到的。</li>
<li>用户账单可以进一步细分为账单项，账单项是为客户打印账单提供清晰明了的消费明细。</li>
</ul>
<p>账单应当归属于用户，为客户提供的账单应当以产品为单元来生成账单，一般的消费习惯都是以产品为单元来付费；但同时也应该生成客户账单，如果一个客户选择了运营商的多个产品，那么客户如果需要一个所有产品的账单，运营商应当提供，同时集团客户需要一个集团所有客户的消费明细，也需要有一个集团客户账单。</p>
<p>用户和账户的映射关系，主要就是销账规则。销账流程中处理模型应当也是按照用户的账单来销账，而不是按照客户账单，客户的账单应当只是用户账单的简单算术运算的得到的账单，只提供打印。</p>
<p>客户和账户应当有一个归属的对应规则，该规则应当是一种归属关系，个人账户应该归属于个人客户，集团账户应当归属于集团客户。但这只是一种归属关系，而没有付费关系，账户可以跨客户为几个用户付费，也可以为单个用户账单的某个账目付费。</p>
<p>产品在市场提供时难免会遇到，产品的某项子功能的交叉优惠，这种交叉优惠，应当打包成为一个产品。在具体的系统模型中的体现就是增加一个用户，并赋予一定的资费，同时指定一个账户来为其销账，就统一了整个模型。</p>
<p>账户的生命周期：</p>
<p><img src="https://www.biaodianfu.com/wp-content/uploads/2020/09/account.png" alt=""></p>
<p><strong>账户建模</strong></p>
<p>在支付系统中，账户的建模，主要是从如下几个方面来考虑：</p>
<ul>
<li>交易的需求，比如检查账户是否被锁定、余额是否足够、是否有效等。</li>
<li>记账的需求，按照公司会计需求记录账户上的所有行为，包括支出、充值、转账等。</li>
<li>对账的需求，包括和支付渠道、商户、个人的对账需求，核对交易和账户余额是否正确。</li>
<li>风控的需求，如反洗钱、反欺诈等，都需要依赖于账户体系来提供核心数据。</li>
<li>信用的需求，对用户、资产、商户等主体进行信用评估时，也需要依赖账户体系来提供的核心数据。</li>
</ul>
<p>这五个需求，按照其设计的优先级，也是从支付、记账、对账、风控来进行。支付系统根据其发展所处的阶段，逐步将新增需求纳入设计中。</p>
<p>根据业务需要，可以设置多种账户，如支付账户、预付卡账户、代扣账户、零钱账户、结算账户等。一般来说电商系统中涉及的账户类型有：</p>
<ul>
<li>虚拟币账号：用户和使用虚拟币的商户都需要建立虚拟币账户。</li>
<li>代扣账号： 用来支持订阅类型的定期代扣；</li>
<li>零钱账号：即电商的内部账号，用户、商户、清算单位需要建立零钱账户</li>
<li>第三方支付账号：用户在第三方支付机构建立的账户。</li>
<li>银行卡账号：用户的银行卡信息，每个卡对应一个账户。</li>
<li>结算账号：用来支持和第三方支付公司、银行进行结算用。 第三方支付需要为每个商户号建立结算账号；银行需要为借记卡、贷记卡分别建立结算账号（有必要吗？银行卡直连时使用）。</li>
<li>代扣代缴账户：用来支持代扣税款业务。</li>
</ul>
<p>注意，有些第三方信息是不能保存的，如信用卡的CV号等。</p>
<h3>三层身份模型</h3>
<p>从使用层面，三户模型更加适合交易类网站，三层身份模型可能更加适合社交性质的网站。三层身份模型将用户分层三个层次，分别为：账户标识符，登录标识符和公开标识符。翻译成大白话可以是：账户ID、登陆账号、昵称。</p>
<p><img src="https://www.biaodianfu.com/wp-content/uploads/2020/09/the-tripartite-identity-pattern.gif" alt=""></p>
<h4>账户标识符（DB Key）</h4>
<p>从软件工程的角度，需要在数据库中存在一个用户标识(key)来记录每个用户的记录。这个用户标识可能会被用在Cookies或者URL中，这个账户标识符必须是永久的、唯一的。通常是由系统自动生成的一个ID，这个ID不受用户的控制，从用户角度这个标识符应该是不不可见或至少是惰性的，这个标识符不应该与一些公共名称，比如手机号或邮箱。</p>
<h4>登录标识符（会话认证）</h4>
<p>在创建与账户标识符关联的有效会话（Session）时，登陆标识符时必须要的，他们用来从服务中获取授权。通常由唯一的账号/密码对表示（这里的账号可以是邮箱或手机号，也可以是用户选择的用户名）。注意，账户/密码并不是一定需要存在的，比如通过oAuth形式的授权登陆（类似微信登陆、微博登陆等）。</p>
<p>将登陆标识符与账户标识符分开，可以使得用户更加容易的改变登陆方式。由于账户标识符不需要更改，因此可以避免更换登陆方式或登陆账号带来的数据迁移问题。最重要的是，可以提供多个不同登陆标识符附加到单个账户上，从而可以允许服务聚合从多个身份供应商收集的信息。（如授权获得微信或微博的个人信息）</p>
<h4>公开标识符（社会标识）</h4>
<p>与账户标识符和登陆标识符不同，公开标识符标识用户希望如何被服务商的其他用户感知。在线用户的公共标识符通常是复合对象：照片，昵称，可能还有年龄，性别和位置。它为任何观众提供了足够的信息，可以快速解读个人背景。公共标识符通常链接到详细的用户配置文件，其中可以进一步识别身份。公开标识符在某些情况下需要唯一（比如类似微博的@功能），有时是不需要唯一的（如微信的昵称）。</p>
</div></div><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><div class="mt-12 pt-8 border-t border-gray-200">加载导航中...</div><!--/$--><div class="mt-16 border-t border-gray-200 pt-8"><div class="mx-auto max-w-3xl"><h3 class="text-2xl font-bold text-gray-900 mb-8">评论</h3></div></div></div></div></article><!--$--><!--/$--></main><footer class="bg-[var(--background)]"><div class="mx-auto max-w-7xl px-6 py-12 md:flex md:items-center md:justify-between lg:px-8"><div class="flex justify-center space-x-6 md:order-2"><a class="text-gray-600 hover:text-gray-800" href="/about/">关于</a><a class="text-gray-600 hover:text-gray-800" href="/blog/">博客</a><a class="text-gray-600 hover:text-gray-800" href="/contact/">联系</a></div><div class="mt-8 md:order-1 md:mt-0"><p class="text-center text-xs leading-5 text-gray-600">© 2024 Skyfalling Blog. All rights reserved.</p></div></div></footer></div><script src="/_next/static/chunks/webpack-f7d11fc743a8cf38.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[10616,[\"874\",\"static/chunks/874-f2e46e41114bd221.js\",\"177\",\"static/chunks/app/layout-c432974c723daafe.js\"],\"default\"]\n3:I[87555,[],\"\"]\n4:I[31295,[],\"\"]\n5:I[6874,[\"874\",\"static/chunks/874-f2e46e41114bd221.js\",\"968\",\"static/chunks/968-bf93abe4de13a5fc.js\",\"909\",\"static/chunks/app/blog/%5B...slug%5D/page-26cc6d1a0064a78b.js\"],\"\"]\n7:I[59665,[],\"OutletBoundary\"]\na:I[74911,[],\"AsyncMetadataOutlet\"]\nc:I[59665,[],\"ViewportBoundary\"]\ne:I[59665,[],\"MetadataBoundary\"]\n10:I[26614,[],\"\"]\n:HL[\"/_next/static/media/e4af272ccee01ff0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/0a7d53676a1eb136.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"fEmHZchMN56N6zbkBdACr\",\"p\":\"\",\"c\":[\"\",\"blog\",\"tech\",\"business\",\"%E7%94%A8%E6%88%B7%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E2%80%94%E2%80%94%E4%B8%89%E6%88%B7%E6%A8%A1%E5%9E%8B%E5%8F%8A%E4%B8%89%E5%B1%82%E8%BA%AB%E4%BB%BD%E6%A8%A1%E5%9E%8B\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"tech/business/%E7%94%A8%E6%88%B7%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E2%80%94%E2%80%94%E4%B8%89%E6%88%B7%E6%A8%A1%E5%9E%8B%E5%8F%8A%E4%B8%89%E5%B1%82%E8%BA%AB%E4%BB%BD%E6%A8%A1%E5%9E%8B\",\"c\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/0a7d53676a1eb136.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"zh-CN\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_f367f3\",\"children\":[\"$\",\"div\",null,{\"className\":\"min-h-screen flex flex-col\",\"children\":[[\"$\",\"$L2\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1\",\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"footer\",null,{\"className\":\"bg-[var(--background)]\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-7xl px-6 py-12 md:flex md:items-center md:justify-between lg:px-8\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex justify-center space-x-6 md:order-2\",\"children\":[[\"$\",\"$L5\",null,{\"href\":\"/about\",\"className\":\"text-gray-600 hover:text-gray-800\",\"children\":\"关于\"}],[\"$\",\"$L5\",null,{\"href\":\"/blog\",\"className\":\"text-gray-600 hover:text-gray-800\",\"children\":\"博客\"}],[\"$\",\"$L5\",null,{\"href\":\"/contact\",\"className\":\"text-gray-600 hover:text-gray-800\",\"children\":\"联系\"}]]}],[\"$\",\"div\",null,{\"className\":\"mt-8 md:order-1 md:mt-0\",\"children\":[\"$\",\"p\",null,{\"className\":\"text-center text-xs leading-5 text-gray-600\",\"children\":\"© 2024 Skyfalling Blog. All rights reserved.\"}]}]]}]}]]}]}]}]]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"tech/business/%E7%94%A8%E6%88%B7%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E2%80%94%E2%80%94%E4%B8%89%E6%88%B7%E6%A8%A1%E5%9E%8B%E5%8F%8A%E4%B8%89%E5%B1%82%E8%BA%AB%E4%BB%BD%E6%A8%A1%E5%9E%8B\",\"c\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L6\",null,[\"$\",\"$L7\",null,{\"children\":[\"$L8\",\"$L9\",[\"$\",\"$La\",null,{\"promise\":\"$@b\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"FQy8tuazhVfP--5uRWUCWv\",{\"children\":[[\"$\",\"$Lc\",null,{\"children\":\"$Ld\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$10\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"11:\"$Sreact.suspense\"\n12:I[74911,[],\"AsyncMetadata\"]\n14:I[32923,[\"874\",\"static/chunks/874-f2e46e41114bd221.js\",\"968\",\"static/chunks/968-bf93abe4de13a5fc.js\",\"909\",\"static/chunks/app/blog/%5B...slug%5D/page-26cc6d1a0064a78b.js\"],\"default\"]\n16:I[40780,[\"874\",\"static/chunks/874-f2e46e41114bd221.js\",\"968\",\"static/chunks/968-bf93abe4de13a5fc.js\",\"909\",\"static/chunks/app/blog/%5B...slug%5D/page-26cc6d1a0064a78b.js\"],\"default\"]\n19:I[85300,[\"874\",\"static/chunks/874-f2e46e41114bd221.js\",\"968\",\"static/chunks/968-bf93abe4de13a5fc.js\",\"909\",\"static/chunks/app/blog/%5B...slug%5D/page-26cc6d1a0064a78b.js\"],\"default\"]\nf:[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$11\",null,{\"fallback\":null,\"children\":[\"$\",\"$L12\",null,{\"promise\":\"$@13\"}]}]}]\n15:T3a5b,"])</script><script>self.__next_f.push([1,"\u003ch1\u003e用户系统设计:三户模型\u0026amp;三层身份模型\u003c/h1\u003e\n\u003ch3\u003e三户模型\u003c/h3\u003e\n\u003cp\u003e三户模型最早是在增强型电信运营图（Enhanced Telecom Operations Map，eTOM）中提出，在电信行业中得到广泛使用。 三户指客户（Customer）、用户（User）和账户(Account)。eTOM 引入是电信行业营销模型转向“以客户为中心”的理念而产生的成果。围绕客户建立用户和账户。这三个是相互关联的实体，这种关联只是一个归属和映射的关系，而三个实体本身是相互独立的，分别是体现完全不同的几个域的信息，\u003cstrong\u003e客户\u003c/strong\u003e是体现了\u003cstrong\u003e社会域\u003c/strong\u003e的信息，\u003cstrong\u003e用户\u003c/strong\u003e体现了\u003cstrong\u003e业务域\u003c/strong\u003e的信息，\u003cstrong\u003e账户\u003c/strong\u003e体现的是\u003cstrong\u003e资金域\u003c/strong\u003e的信息。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e客户（customer）：是指客户（自然人、公司、集团公司）的基本资料信息。例如自然人的姓名、手机号、身份证、邮箱地址等等；公司的五证一照、行业、联系人、网站地址、通讯地址等等。如无特指，一般客户指个人客户。\u003c/li\u003e\n\u003cli\u003e用户（user）：指客户在系统的登录账号信息，包括账号、密码、人员权限、角色等等。对应的，法人客户在系统中注册后，被称之为商户。\u003c/li\u003e\n\u003cli\u003e账户（account）：指客户在系统的虚拟账户，主要与交易记账相关。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"https://www.biaodianfu.com/wp-content/uploads/2020/09/customer-user-account.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e以电信业务为例：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e客户：人\u003c/li\u003e\n\u003cli\u003e用户：电信产品的实例表现\u003c/li\u003e\n\u003cli\u003e账户：付费的账号\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e假设张三是中国典电信的一个客户，张三办理了一个手机SIM卡和一个宽带业务。其中手机SIM卡和宽带业务分别作为一个用户存在（电信产品实例）。下面还有一个账户的概念，账户是用户进行付费的。一般情况，一个用户只有一个账户，以上例为例，张三有一个账户，为手机号和宽带付费。当然，有的人可能存在多个账户，例如手机号是一个账户，宽带是是一个账户。\u003c/p\u003e\n\u003cp\u003e总结一下，一个客户（张三）可以有多个用户（一个手机号和一个宽带业务），但一个用户只能归属于一个客户。一个客户可以用多个账户，但一个账户也只能归属于一个客户。账户和用户的关系比较复杂，一般情况，一个账户可以给多个用户付费，但也允许，一个用户的不同费用由多个账户付费，所以账户和用户之间是多对多的关系。\u003c/p\u003e\n\u003ch4\u003e客户\u003c/h4\u003e\n\u003cp\u003e客户是一个社会化的概念，一个自然人或一个法人就称之为一个客户，法人客户既可以是一个企业，也可以是与这个企业、集团相关的自然人客户，可以称之为一个集团客户组。\u003c/p\u003e\n\u003cp\u003e客户可分为个人客户，企业客户。一个客户可以包含多个用户，客户通过唯一的客户标识来确定。客户描述一个客户的自然属性，客户可以和用户一一对应，也可以和用户一对多。\u003cstrong\u003e即使不使用业务，也可能存在客户\u003c/strong\u003e，因为客户是自然存在的。客户信息包含客户名，地址，邮政编码，性别，年龄，职业，证件号码等等信息，是自然存在的信息。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e个人客户\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e在互联网系统中，一般是用户先注册，先有用户，然后补充客户身份信息。也就是客户身份信息是在运行过程中逐步完善的。在电信体系或银行体系，客户的主键通常是证件号（如身份证），将所有相同的证件视为同一客户。在互联网行业通常是将手机号识别为主键（\u003cstrong\u003e注意：手机号有注销、更换等问题\u003c/strong\u003e），这里面就有一个关键业务，既然相同证件的证件号或手机号会识别成一个客户，当相同的证件号或手机号进入系统时，系统是如何处理的？当然是合成一个了，这个过程叫做客户归并，即：将客户合成同一个客户号的过程，我们称为归并。归并是有风险的，所以需要一些\u003cstrong\u003e鉴权手段\u003c/strong\u003e来处理。\u003c/p\u003e\n\u003cp\u003e在互联网应用中，一个系统中的生命周期如下：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://www.biaodianfu.com/wp-content/uploads/2020/09/customer.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e正常的互联网站点一般只有正常和禁入2种状态，银行业可能还会包含冻结和止付状态（以司法协查为例，某个客户被协查以致账户冻结，需要冻结该客户下所有资金账户，这些账户都被止付）。\u003c/p\u003e\n\u003cp\u003e注意在这个流程中\u003cstrong\u003e没有销户的状态\u003c/strong\u003e。 这是为了\u003cstrong\u003e支持历史业务的处理\u003c/strong\u003e，客户一般不做销户。 此外这个流程和支付账户的流程比较类似，这是为了方便在客户层面做账户控制。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e存在问题，用户手机号更换带来的身份识别不能解决。\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e企业客户\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e企业客户相对个人客户来说比较复杂点，但三户模型仍然适用。企业客户是一个组织，其账户必然是组织授权内部人员去操作。但是这个操作人，同个人客户一样，只是系统的使用者，即用户。企业的资金比较大，并且有严格的业务流程，所以在系统使用上，一般是多个用户操作一个或多个资金账户。这种关系本身来说，也是一种授权关系，企业授权相应的用户来操作特定的资金账户，只不过为了管理方便，可以引入角色管理机制来实现。对于支付公司来说，企业客户通常都是发展商户过程中产生的。企业客户的识别同个人客户识别也是一样的，通过企业证件来统一识别。相同的企业证件号归并到同一个企业客户下面。建立企业客户的好处在于：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e有些企业本身只开通了企业服务业务，而不开通商户服务\u003c/li\u003e\n\u003cli\u003e一个企业可以开通多个商户，企业客户是这些多个商户的统计口径\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4\u003e用户\u003c/h4\u003e\n\u003cp\u003e用户是在产品基础上产生的实体。如果说一个客户使用了多个产品，那么一个客户就会对应好几个用户（即产品）。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e个体用户\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e用户与资金账户之间我们可以抽象出一种授权关系，凡是授权用户，都可以操作资金账户，当然，这种授权包括客户自己的用户。用户的建立比较简单，一般自助注册后就可以生成用户实体了。\u003c/p\u003e\n\u003cp\u003e用户的生命周期如下：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://www.biaodianfu.com/wp-content/uploads/2020/09/user.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e如果用户想要销户，收到销户申请后，不能直接销户，客户是通过用户来进行资金账户的管理与操作的，所以，此时有个确认过程，要求各业务系统确认此用户下的所有账户是否可以销户，如果没有问题，先销资金账户，当用户下的所有资金账户都销户完毕，再销用户，用户销户完成后，会释放出此用户占用的资源，如注册手机号。\u003c/p\u003e\n\u003cp\u003e在互联网环境比较多的场景是用户更新手机号，用户更新手机号的时候涉及到的两个手机号都需要验证。需要注意的是， 更新手机号需要涉及到更新客户ID。\u003c/p\u003e\n\u003cp\u003e用户除了生命周期状态外，还有一个管理状态，比如锁定，从现实模型中来说，这个是不应该放在用户层面的而是放在账户层面上的，但互联网模式下，一个用户有多个资金账户，为了用户体验，把这些放在了用户层面上了，就如同支付密码放在用户层面上一样。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e商户\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e商户是企业客户的一个业务影子，或是看成资金账户分组的一个手段。商户是客户一个外围业务，如果把它看成用户平级层面也是可以的，即：此商户所有业务产生的资金进入到一个分类资金账户里。不论怎么说，一个企业不论开多少个商户，每个商户又开通多少个资金账户，都改变不了资金账户的归属关系，它是现实客户这个实体的。\u003c/p\u003e\n\u003ch4\u003e账户\u003c/h4\u003e\n\u003cp\u003e账户的概念起源于金融业，只是一个客户存放资金的实体，目的是为选择的产品付费。一个客户可以拥有一个账户也可以拥有多个账户，账户上的资金可以为客户本人的用户付费，也可以为其他客户的用户付费，这种付费关系需要一个付费规则进行关联。\u003c/p\u003e\n\u003cp\u003e既然账户关系到付费规则，必然会引出账单的概念。一般来首先要生成用户账单，账单应该归属于用户。\u003c/p\u003e\n\u003cp\u003e账单分为两级，客户账单和用户账单：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e客户账单是根据用户账单按照规则进行简单的算术加和得到的。\u003c/li\u003e\n\u003cli\u003e用户账单可以进一步细分为账单项，账单项是为客户打印账单提供清晰明了的消费明细。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e账单应当归属于用户，为客户提供的账单应当以产品为单元来生成账单，一般的消费习惯都是以产品为单元来付费；但同时也应该生成客户账单，如果一个客户选择了运营商的多个产品，那么客户如果需要一个所有产品的账单，运营商应当提供，同时集团客户需要一个集团所有客户的消费明细，也需要有一个集团客户账单。\u003c/p\u003e\n\u003cp\u003e用户和账户的映射关系，主要就是销账规则。销账流程中处理模型应当也是按照用户的账单来销账，而不是按照客户账单，客户的账单应当只是用户账单的简单算术运算的得到的账单，只提供打印。\u003c/p\u003e\n\u003cp\u003e客户和账户应当有一个归属的对应规则，该规则应当是一种归属关系，个人账户应该归属于个人客户，集团账户应当归属于集团客户。但这只是一种归属关系，而没有付费关系，账户可以跨客户为几个用户付费，也可以为单个用户账单的某个账目付费。\u003c/p\u003e\n\u003cp\u003e产品在市场提供时难免会遇到，产品的某项子功能的交叉优惠，这种交叉优惠，应当打包成为一个产品。在具体的系统模型中的体现就是增加一个用户，并赋予一定的资费，同时指定一个账户来为其销账，就统一了整个模型。\u003c/p\u003e\n\u003cp\u003e账户的生命周期：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://www.biaodianfu.com/wp-content/uploads/2020/09/account.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e账户建模\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e在支付系统中，账户的建模，主要是从如下几个方面来考虑：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e交易的需求，比如检查账户是否被锁定、余额是否足够、是否有效等。\u003c/li\u003e\n\u003cli\u003e记账的需求，按照公司会计需求记录账户上的所有行为，包括支出、充值、转账等。\u003c/li\u003e\n\u003cli\u003e对账的需求，包括和支付渠道、商户、个人的对账需求，核对交易和账户余额是否正确。\u003c/li\u003e\n\u003cli\u003e风控的需求，如反洗钱、反欺诈等，都需要依赖于账户体系来提供核心数据。\u003c/li\u003e\n\u003cli\u003e信用的需求，对用户、资产、商户等主体进行信用评估时，也需要依赖账户体系来提供的核心数据。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e这五个需求，按照其设计的优先级，也是从支付、记账、对账、风控来进行。支付系统根据其发展所处的阶段，逐步将新增需求纳入设计中。\u003c/p\u003e\n\u003cp\u003e根据业务需要，可以设置多种账户，如支付账户、预付卡账户、代扣账户、零钱账户、结算账户等。一般来说电商系统中涉及的账户类型有：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e虚拟币账号：用户和使用虚拟币的商户都需要建立虚拟币账户。\u003c/li\u003e\n\u003cli\u003e代扣账号： 用来支持订阅类型的定期代扣；\u003c/li\u003e\n\u003cli\u003e零钱账号：即电商的内部账号，用户、商户、清算单位需要建立零钱账户\u003c/li\u003e\n\u003cli\u003e第三方支付账号：用户在第三方支付机构建立的账户。\u003c/li\u003e\n\u003cli\u003e银行卡账号：用户的银行卡信息，每个卡对应一个账户。\u003c/li\u003e\n\u003cli\u003e结算账号：用来支持和第三方支付公司、银行进行结算用。 第三方支付需要为每个商户号建立结算账号；银行需要为借记卡、贷记卡分别建立结算账号（有必要吗？银行卡直连时使用）。\u003c/li\u003e\n\u003cli\u003e代扣代缴账户：用来支持代扣税款业务。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e注意，有些第三方信息是不能保存的，如信用卡的CV号等。\u003c/p\u003e\n\u003ch3\u003e三层身份模型\u003c/h3\u003e\n\u003cp\u003e从使用层面，三户模型更加适合交易类网站，三层身份模型可能更加适合社交性质的网站。三层身份模型将用户分层三个层次，分别为：账户标识符，登录标识符和公开标识符。翻译成大白话可以是：账户ID、登陆账号、昵称。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://www.biaodianfu.com/wp-content/uploads/2020/09/the-tripartite-identity-pattern.gif\" alt=\"\"\u003e\u003c/p\u003e\n\u003ch4\u003e账户标识符（DB Key）\u003c/h4\u003e\n\u003cp\u003e从软件工程的角度，需要在数据库中存在一个用户标识(key)来记录每个用户的记录。这个用户标识可能会被用在Cookies或者URL中，这个账户标识符必须是永久的、唯一的。通常是由系统自动生成的一个ID，这个ID不受用户的控制，从用户角度这个标识符应该是不不可见或至少是惰性的，这个标识符不应该与一些公共名称，比如手机号或邮箱。\u003c/p\u003e\n\u003ch4\u003e登录标识符（会话认证）\u003c/h4\u003e\n\u003cp\u003e在创建与账户标识符关联的有效会话（Session）时，登陆标识符时必须要的，他们用来从服务中获取授权。通常由唯一的账号/密码对表示（这里的账号可以是邮箱或手机号，也可以是用户选择的用户名）。注意，账户/密码并不是一定需要存在的，比如通过oAuth形式的授权登陆（类似微信登陆、微博登陆等）。\u003c/p\u003e\n\u003cp\u003e将登陆标识符与账户标识符分开，可以使得用户更加容易的改变登陆方式。由于账户标识符不需要更改，因此可以避免更换登陆方式或登陆账号带来的数据迁移问题。最重要的是，可以提供多个不同登陆标识符附加到单个账户上，从而可以允许服务聚合从多个身份供应商收集的信息。（如授权获得微信或微博的个人信息）\u003c/p\u003e\n\u003ch4\u003e公开标识符（社会标识）\u003c/h4\u003e\n\u003cp\u003e与账户标识符和登陆标识符不同，公开标识符标识用户希望如何被服务商的其他用户感知。在线用户的公共标识符通常是复合对象：照片，昵称，可能还有年龄，性别和位置。它为任何观众提供了足够的信息，可以快速解读个人背景。公共标识符通常链接到详细的用户配置文件，其中可以进一步识别身份。公开标识符在某些情况下需要唯一（比如类似微博的@功能），有时是不需要唯一的（如微信的昵称）。\u003c/p\u003e\n"])</script><script>self.__next_f.push([1,"17:T2403,"])</script><script>self.__next_f.push([1,"\u003ch1\u003e城市探索：发现身边的隐藏之美\u003c/h1\u003e\n\u003cp\u003e在这个快节奏的现代社会中，我们往往忽略了身边城市的美。城市探索（Urban Exploration）不仅是一种旅行方式，更是一种重新发现和认识城市的方法。本文将带你走进城市探索的世界，发现那些被遗忘的角落和隐藏的美丽。\u003c/p\u003e\n\u003ch2\u003e什么是城市探索\u003c/h2\u003e\n\u003ch3\u003e定义\u003c/h3\u003e\n\u003cp\u003e城市探索是一种探索城市中不为人知或鲜为人知地点的活动，包括历史建筑、废弃工厂、地下通道、屋顶景观等。它不仅仅是冒险，更是一种文化探索和摄影艺术。\u003c/p\u003e\n\u003ch3\u003e探索精神\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e好奇心驱动\u003c/strong\u003e - 对未知的探索欲望\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e历史意识\u003c/strong\u003e - 对城市历史的关注\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e艺术视角\u003c/strong\u003e - 用摄影记录城市之美\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e文化理解\u003c/strong\u003e - 深入了解城市文化\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e城市探索的类型\u003c/h2\u003e\n\u003ch3\u003e历史建筑探索\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e古建筑\u003c/strong\u003e - 具有历史价值的建筑\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e宗教建筑\u003c/strong\u003e - 教堂、寺庙、清真寺\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e工业遗迹\u003c/strong\u003e - 废弃工厂、火车站\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e军事设施\u003c/strong\u003e - 堡垒、碉堡、防空洞\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e现代建筑探索\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e摩天大楼\u003c/strong\u003e - 城市天际线的制高点\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e艺术建筑\u003c/strong\u003e - 具有艺术价值的现代建筑\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e公共空间\u003c/strong\u003e - 广场、公园、步行街\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e交通设施\u003c/strong\u003e - 地铁站、桥梁、隧道\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e自然与城市融合\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e城市公园\u003c/strong\u003e - 城市中的绿色空间\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e河岸景观\u003c/strong\u003e - 河流与城市的交汇\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e山体公园\u003c/strong\u003e - 城市中的山地景观\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e海岸线\u003c/strong\u003e - 海滨城市的独特魅力\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e探索前的准备\u003c/h2\u003e\n\u003ch3\u003e安全考虑\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003e法律风险\u003c/strong\u003e - 了解相关法律法规\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e物理安全\u003c/strong\u003e - 注意建筑结构安全\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e个人防护\u003c/strong\u003e - 准备必要的防护装备\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e应急准备\u003c/strong\u003e - 携带急救用品和通讯设备\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3\u003e装备准备\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e摄影设备\u003c/strong\u003e - 相机、镜头、三脚架\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e照明设备\u003c/strong\u003e - 手电筒、头灯\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e防护装备\u003c/strong\u003e - 安全帽、手套、口罩\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e导航工具\u003c/strong\u003e - GPS、地图、指南针\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e信息收集\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e历史资料\u003c/strong\u003e - 了解建筑的历史背景\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e建筑信息\u003c/strong\u003e - 建筑结构和使用历史\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e交通路线\u003c/strong\u003e - 如何到达目的地\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e时间安排\u003c/strong\u003e - 最佳探索时间\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e探索技巧\u003c/h2\u003e\n\u003ch3\u003e观察技巧\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003e细节观察\u003c/strong\u003e - 注意建筑的细节装饰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e光影利用\u003c/strong\u003e - 利用自然光创造效果\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e角度选择\u003c/strong\u003e - 寻找独特的拍摄角度\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e时间把握\u003c/strong\u003e - 选择最佳的光线时间\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3\u003e摄影技巧\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e构图原则\u003c/strong\u003e - 运用摄影构图技巧\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e光线控制\u003c/strong\u003e - 掌握不同光线条件\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e色彩处理\u003c/strong\u003e - 后期调色和编辑\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e故事讲述\u003c/strong\u003e - 通过照片讲述故事\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e记录方法\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e文字记录\u003c/strong\u003e - 记录探索过程和感受\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e影像记录\u003c/strong\u003e - 照片和视频记录\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e地图标记\u003c/strong\u003e - 在地图上标记位置\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e社交媒体\u003c/strong\u003e - 分享探索成果\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e城市探索的伦理\u003c/h2\u003e\n\u003ch3\u003e尊重原则\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e不破坏\u003c/strong\u003e - 不损坏建筑和设施\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e不偷盗\u003c/strong\u003e - 不带走任何物品\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e不打扰\u003c/strong\u003e - 不影响当地居民生活\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e不污染\u003c/strong\u003e - 不留下垃圾和污染\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e法律意识\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e了解法规\u003c/strong\u003e - 熟悉相关法律法规\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e获得许可\u003c/strong\u003e - 必要时获得进入许可\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e尊重产权\u003c/strong\u003e - 尊重私人财产权\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e承担责任\u003c/strong\u003e - 为自己的行为负责\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e文化尊重\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e理解历史\u003c/strong\u003e - 深入了解建筑的历史意义\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e尊重文化\u003c/strong\u003e - 尊重当地文化传统\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e保护遗产\u003c/strong\u003e - 参与文化遗产保护\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e教育传播\u003c/strong\u003e - 传播历史文化知识\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e探索案例分享\u003c/h2\u003e\n\u003ch3\u003e案例一：工业遗迹探索\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e地点\u003c/strong\u003e - 废弃纺织厂\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e历史\u003c/strong\u003e - 建于20世纪初的工业建筑\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e特色\u003c/strong\u003e - 红砖建筑、工业设备\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e感受\u003c/strong\u003e - 工业时代的记忆和变迁\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e案例二：历史街区探索\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e地点\u003c/strong\u003e - 老城区历史建筑\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e特色\u003c/strong\u003e - 传统建筑风格、街巷文化\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e发现\u003c/strong\u003e - 隐藏的小店、传统手工艺\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e体验\u003c/strong\u003e - 感受传统与现代的融合\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e案例三：现代建筑探索\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e地点\u003c/strong\u003e - 现代商业区\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e特色\u003c/strong\u003e - 玻璃幕墙、几何造型\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e视角\u003c/strong\u003e - 从不同角度观察现代建筑\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e对比\u003c/strong\u003e - 现代与传统的对比\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e城市探索的意义\u003c/h2\u003e\n\u003ch3\u003e个人成长\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e观察力提升\u003c/strong\u003e - 培养敏锐的观察力\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e创造力激发\u003c/strong\u003e - 激发艺术创作灵感\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e知识积累\u003c/strong\u003e - 学习城市历史和文化\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e身心放松\u003c/strong\u003e - 在探索中获得放松\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e社会价值\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e文化传承\u003c/strong\u003e - 记录和保护城市文化\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e历史教育\u003c/strong\u003e - 传播城市历史知识\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e艺术创作\u003c/strong\u003e - 为艺术创作提供素材\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e社区建设\u003c/strong\u003e - 促进社区文化发展\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e环境保护\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e意识提升\u003c/strong\u003e - 提高环保意识\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e文化保护\u003c/strong\u003e - 参与文化遗产保护\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e可持续发展\u003c/strong\u003e - 支持城市可持续发展\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e绿色出行\u003c/strong\u003e - 倡导环保出行方式\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e探索路线规划\u003c/h2\u003e\n\u003ch3\u003e主题路线\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003e历史路线\u003c/strong\u003e - 以历史建筑为主题\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e艺术路线\u003c/strong\u003e - 以艺术建筑为主题\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e工业路线\u003c/strong\u003e - 以工业遗迹为主题\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e自然路线\u003c/strong\u003e - 以自然景观为主题\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3\u003e时间规划\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e短期探索\u003c/strong\u003e - 半天到一天的探索\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e中期探索\u003c/strong\u003e - 周末两天的深度探索\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e长期探索\u003c/strong\u003e - 一周以上的系统探索\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e季节探索\u003c/strong\u003e - 不同季节的特色探索\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e团队组织\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e个人探索\u003c/strong\u003e - 独自进行的探索\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e小组探索\u003c/strong\u003e - 2-3人的小团队\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e团体探索\u003c/strong\u003e - 有组织的团体活动\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e专业探索\u003c/strong\u003e - 专业摄影师或历史学家\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e技术与工具\u003c/h2\u003e\n\u003ch3\u003e现代技术\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e无人机\u003c/strong\u003e - 高空拍摄和探索\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eVR技术\u003c/strong\u003e - 虚拟现实城市探索\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eAR应用\u003c/strong\u003e - 增强现实城市导览\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e3D建模\u003c/strong\u003e - 建筑三维重建\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e数字工具\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e地图应用\u003c/strong\u003e - 导航和路线规划\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e摄影应用\u003c/strong\u003e - 照片编辑和分享\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e社交平台\u003c/strong\u003e - 探索成果分享\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e数据库\u003c/strong\u003e - 城市信息查询\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e未来发展趋势\u003c/h2\u003e\n\u003ch3\u003e技术融合\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e智能探索\u003c/strong\u003e - AI辅助城市探索\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e虚拟现实\u003c/strong\u003e - VR城市探索体验\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e大数据\u003c/strong\u003e - 基于数据的探索路线\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e物联网\u003c/strong\u003e - 智能城市探索系统\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e文化发展\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e文化创意\u003c/strong\u003e - 城市探索与文化创意结合\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e教育应用\u003c/strong\u003e - 城市探索在教育中的应用\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e旅游发展\u003c/strong\u003e - 城市探索旅游产品开发\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e社区参与\u003c/strong\u003e - 社区居民参与探索活动\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e总结\u003c/h2\u003e\n\u003cp\u003e城市探索不仅是一种活动，更是一种生活态度。它教会我们用新的视角看待身边的世界，发现那些被忽略的美丽。\u003c/p\u003e\n\u003cp\u003e通过城市探索，我们不仅能获得独特的体验和美丽的照片，更能深入了解城市的历史和文化，培养对城市的热爱和责任感。\u003c/p\u003e\n\u003cp\u003e记住，最美的风景往往就在我们身边，只需要我们用心去发现。\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cem\u003e城市探索让我们重新认识脚下的土地，发现城市中隐藏的诗意和故事。\u003c/em\u003e \u003c/p\u003e\n"])</script><script>self.__next_f.push([1,"18:T506c,"])</script><script>self.__next_f.push([1,"\u003cp\u003e　　账户体系是支付系统的基础，它的设计直接影响整个系统的特性。这里探讨如何针对电子商务系统的账户体系设计。我们从一些基本概念开始入手，了解怎么建模。\u003c/p\u003e\n\u003ch3\u003e1 三户模型 \u003ca href=\"#t1\" id=\"t1\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e　　三户模型最早是在增强型电信运营图（Enhanced Telecom Operations Map，eTOM）中提出，在电信行业中得到广泛使用。 三户指客户（Customer）、用户（User）和账户(Account)。eTOM 引入是电信行业营销模型转向“以客户为中心”的理念而产生的成果。围绕客户建立用户和账户，这三个是相互关联的实体。近年来，金融行业也逐步接受和采用了三户模型。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e客户\u003c/strong\u003e，指自然人或者法人。法人一般被称之为企业客户。如无特指，一般客户指个人客户。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e用户\u003c/strong\u003e，指通过注册的方式进入系统，使用系统提供的服务的实体，也称为登录账户，即用户在系统中登录凭证和个人信息。对应的，法人客户在系统中注册后，被称之为商户。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e账户\u003c/strong\u003e，这里特指支付账户，指用户在支付系统中用于交易的资金所有者权益的凭证。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e2 客户 \u003ca href=\"#t2\" id=\"t2\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003ch4\u003e2.1 个人客户 \u003ca href=\"#t3\" id=\"t3\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003e　　在银行体系中，一般是先有客户，再有用户。早期个人客户通过柜台人员操作注册到银行体系中，柜台人员在处理时，先添加客户信息，再注册账户信息。而在互联网系统中， 一般是用户先注册，先有用户，然后补充客户身份信息。也就是客户身份信息是在运行过程中逐步完善的。在银行柜台，操作人员通过面签或实名方式在系统中建立客户对象。这个对象的业务主键是证件号（如，身份证，假设目前 18 位证件都不重号），所有相同证件我们都视为同一个客户，不论是不是同一个系统中。同一个证件号，不论在工行还是中行，开出来的客户，其实都对应着现实中的同一个人。\u003c/p\u003e\n\u003cp\u003e　　在一个平台体系中，通过系统给客户分配的唯一 ID 号客户 ID 来标识客户对像。这里面就有一个关键业务，既然相同证件都会识别成一个客户，那么当相同的证件号进入系统时，系统是如何处理的？当然是合成一个了，这个过程叫做客户归并，即：\u003cstrong\u003e将相同证件的客户合成同一个客户号的过程，我们称为归并\u003c/strong\u003e。归并是有风险的，所以需要一些鉴权手段来处理。在互联网应用中，一个系统中客户的生命周期如下：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/blog/tech/business/image_3_1.png\" alt=\"image_3_1.png\"\u003e\u003c/p\u003e\n\u003cp\u003e注意在这个流程中没有销户的状态。这是为了支持历史业务的处理，客户一般不做销户。此外这个流程和支付账户的流程比较类似，这是为了方便在客户层面做账户控制。以司法协查为例，某个客户被协查以致账户冻结，需要冻结该客户下所有资金账户，这些账户都被止付。\u003c/p\u003e\n\u003ch4\u003e2.2 企业客户 \u003ca href=\"#t4\" id=\"t4\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003e　　企业客户相对个人客户来说比较复杂点，但三户模型仍然适用。同个人客户一样，企业客户在银行或支付平台开设资金账户，资金账户归属于此客户。企业客户是一个组织，其账户必然是组织授权内部人员去操作。但是这个操作人，同个人客户一样，只是系统的使用者，即用户。企业的资金比较大，并且有严格的业务流程，所以在系统使用上，一般是多个用户操作一个或多个资金账户。这种关系本身来说，也是一种授权关系，企业授权相应的用户来操作特定的资金账户，只不过为了管理方便，可以引入角色管理机制来实现。对于支付公司来说，企业客户通常都是发展商户过程中产生的。企业客户的识别同个人客户识别也是一样的，通过企业证件来统一识别。相同的企业证件号归并到同一个企业客户下面。建立企业客户的好处在于：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e有些企业本身只开通了企业服务业务，而不开通商户服务；\u003c/li\u003e\n\u003cli\u003e一个企业可以开通多个商户，企业客户是这些多个商户的统计口径。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4\u003e2.3 客户模型 \u003ca href=\"#t5\" id=\"t5\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003e　　对客户的处理，在银行系统中是 CIF 系统或 ECIF 系统，而在互联网模式下，很多都是基于微服务的体系，如何划分微服务，这块要从客户系统对提供的业务主题来分。比如：对于个人客户，客户识别就是一个服务主题，对于一个客户有多种多样的识别方式，除了证件外，还包括生物识别，比如画像、指纹等。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e基本信息也是一个服务主题：包括客户的最基本的信息，姓名、年令、职业等;\u003c/li\u003e\n\u003cli\u003e管理信息也是一个服务主题：比如这个客户的评级、是否集团员工等；\u003c/li\u003e\n\u003cli\u003e客户标签也是一个服务主题：所谓标签，就是从不同的维度来给客户做个标记，一个客户有多个标签，当然，前提是要对标签做好规划；\u003c/li\u003e\n\u003cli\u003e协议管理也是客户的一个服务主题：这里面有授权协议、委托协议等。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e当然，客户还有其它的一些主题，这个要看公司的业务了。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/blog/tech/business/image_3_2.png\" alt=\"image_3_2.png\"\u003e\u003c/p\u003e\n\u003ch3\u003e3 用户和商户 \u003ca href=\"#t6\" id=\"t6\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003ch4\u003e3.1 用户 \u003ca href=\"#t7\" id=\"t7\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003e　　用户是账户的操作实体，它是由客户来注册到系统中来的。虽然用户通过客户间接的拥有了资金账户，但这种关系并不是绝对的，比如，一个用户可以授权另一个用户进行账户的余额查询。所以，用户与资金账户之间我们可以抽象出一种授权关系，凡是授权用户，都可以操作资金账户，当然，这种授权包括客户自己的用户。用户的建立比较简单，一般自助注册后就可以生成用户实体了。用户的生命周期如下：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/blog/tech/business/image_3_3.png\" alt=\"image_3_3.png\"\u003e\u003c/p\u003e\n\u003cp\u003e　　如果用户通过简易注册方式生成，这种情况下生成的是个预开户状态的用户，用户需要进一步完善一些信息才能变成正常用户，比如有些平台，在用户第一次登录时要求设置密保问题及答案。如果用户采用标准注册方式注册 的，可以直接成正常状态用户，正常做业务了。\u003c/p\u003e\n\u003cp\u003e　　如果用户想要销户，收到销户申请后，不能直接销户，前面我们说过了，客户是通过用户来进行资金账户的管理与操作的，没有用户，资金账户就有可能没法玩了（假设客户只授权自己的一个而且只有一个用户来操作资金账户），特别是一些账户还存在债务。所以，此时有个确认过程，要求各业务系统确认此用户下的所有账户是否可以销户，如果没有问题，先销资金账户，当用户下的所有资金账户都销户完毕，再销用户，用户销户完成后，会释放出此用户占用的资源，如注册手机号。\u003c/p\u003e\n\u003cp\u003e　　用户除了生命周期状态外，还有一个管理状态，比如冻结，从现实模型中来说，这个是不应该放在用户层面的而是放在资金账户层面上的，但互联网模式下，一个用户有多个资金账户，为了用户体验，把这些放在了用户层面上了，就如同支付密码放在用户层面上一样。\u003c/p\u003e\n\u003ch4\u003e3.2 商户 \u003ca href=\"#t8\" id=\"t8\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003e　　商户是企业客户的一个业务影子，或是看成资金账户分组的一个手段。商户是客户一个外围业务，如果把它看成用户平级层面也是可以的，即：此商户所有业务产生的资金进入到一个分类资金账户里。不论怎么说，一个企业不论开多少个商户，每个商户又开通多少个资金账户，都改变不了资金账户的归属关系，它是现实客户这个实体的。对客户的处理，在银行系统中是 CIF 系统或 ECIF 系统，而在互联网模式下，很多都是基于微服务的体系，如何划分微服务，这块要从客户系统对提供的业务主题来分。\u003c/p\u003e\n\u003ch3\u003e4 账户 \u003ca href=\"#t9\" id=\"t9\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003ch4\u003e4.1 基本概念 \u003ca href=\"#t10\" id=\"t10\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003e　　账户设置，一般是从交易开始的。交易的实现必须有账户的支持，账户是交易的基本构成元素。从支付系统的角度，交易中涉及到的资金流是资金从一个账户流向另一个账户。发起交易的一方，被称之为交易主体，他可以是个人，也可以是一个机构。资金从该主体所拥有的账户中流出。而接收交易的一方，被称为交易对手，他也可以是个人，或者机构。和第三方支付或者金融机构的交易不同，电商系统中，交易还会涉及到渠道。由于电商系统本身并无清结算的资质，所有资金从交易主体到交易对手的账户的流动，在大部分情况下，并没有经过电商系统，而是由电商系统调用支付渠道提供的接口，由它来完成真正的支付过程。当然，渠道也不是活雷锋，在这个过程中，渠道要收取费用。所以，在电商系统中，一次交易会涉及到三个账户： 交易主体账户、交易对手账户以及支付渠道账户。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e支付账户和登录账户\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e　　账户体系设计首先要区分两个概念，支付账户和登录账户。这是两个不同业务领域的概念。\u003cstrong\u003e支付账户\u003c/strong\u003e指用户在支付系统中用于交易的资金所有者权益的凭证。\u003cstrong\u003e登录账号\u003c/strong\u003e指用户在系统中的登录的凭证和个人信息。一个用户可以有多个登录账户，一个登录账户可以有多个支付账户，比如零钱账户，储值卡账户等。 一般来说，支付账户不会在多个登录账户之间共用。如果没有特殊说明，下文中的账户，都默认指支付账户。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e会计科目与账户\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e　　公司的会计需要对每一笔交易都要做详细的记录，即记账。公司每天都产生大量的交易行为，为了便于管理和统计，一个简单的方法是对交易进行分类，比如食品、带宽、办公用品等等。这个分类，按照公司的规模和业务复杂度，可以有一级、二级、三级或者更多级的结构，这被称之为\u003cstrong\u003e会计科目\u003c/strong\u003e。记账时，除了交易明细，还需要在每个级别上对交易额进行汇总。 一般来说，一级科目上汇总称为\u003cstrong\u003e总帐科目\u003c/strong\u003e，而详细记录称为\u003cstrong\u003e明细科目\u003c/strong\u003e。在电商系统中，由于涉及到的参与方较多，记账也相对复杂，但基本方法也是类似的。电商的参与者可以分为商户、买家和渠道，对这三类参与者，都需要分别建立总帐账户和明细账户。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e内部账户和外部账户\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e　　当用户使用银行卡来支付时，电商支付系统需要和银行对接，从用户银行卡所代表的账户上扣除资金。对接了银行，第三方支付等机构的电商支付系统，它需要连接到用户在这些机构的账户来执行扣款或者充值操作，这些账户称为\u003cstrong\u003e外部账户\u003c/strong\u003e。对外部账户，支付系统只能记录账户在本系统的明细以及累计消费额，无法得知账户真正余额。不少电商在玩零钱的概念，也就是让用户充值到零钱，使用的时候就直接从零钱中扣除。这就需要零钱账户。这是电商系统中自己设立的账户，所以也叫\u003cstrong\u003e内部账户\u003c/strong\u003e，可以知道账户的全部消费明细和余额。当然，除了零钱账户，也可以有储值卡账户、信用账户等。那问题来了，什么时候需要建立账户，比如优惠券，需要账户吗？一次消费的储值卡和可以充值的储值卡，需要建立账户吗？这里先埋个雷。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e收款账户和收单账户\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e　　当电商要对接银行时，往往都会被要求开设一个收款账户。用户通过这个银行来支付时，钱就被转到这个账户上。对第三方支付也是一样。收款账户是开设在银行或者第三方支付这边的，即渠道侧。一般来说，渠道每天都可以提供这个账户的交易流水供电商对账用。这样在电商这边，渠道就成为一个收单机构。所以在电商这边，建立这个收款账户对应的对账用的收单账号，用来记录通过这个渠道进行的各项交易流水。\u003c/p\u003e\n\u003ch4\u003e4.2 三类账户 \u003ca href=\"#t11\" id=\"t11\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003e　　在设计支付账户系统时，合规是第一要求，和账户相关的法规，最重要的是近期央行发布的三个文件。 从 2013 年 3 月起，国家相继制定一系列“互联网+”计划，推动了移动互联网、大数据等与现代制造业、服务业相结合，引导企业转型，促进经济健康发展。在此背景下，央行相继发布了三个文件：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e「\u003cstrong\u003e中国人民银行关于改进个人银行账户服务加强账户管理的通知\u003c/strong\u003e」，银发〔2015〕392 号，2015 年 12 月 25 日发文，正式启动账户分类管理工作。\u003c/li\u003e\n\u003cli\u003e「\u003cstrong\u003e中国人民银行关于落实个人银行账户分类管理制度的通知\u003c/strong\u003e」，银发〔2016〕302 号, 2016 年 11 月 25 日发文，明确了同一个人在同一个银行只能有一个\u003ccode\u003eI\u003c/code\u003e类账户的要求。\u003c/li\u003e\n\u003cli\u003e「\u003cstrong\u003e中国人民银行关于加强支付结算管理防范电信网络新型违法犯罪有关事项的通知\u003c/strong\u003e」，银发〔2016〕261 号， 2016 年 9 月 20 日发文，调整并细化了账户分类及使用要求。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e在这些文件中，央行明确对账户实施分类管理的要求。 对这三类账户区别，总结如下：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/blog/tech/business/image_3_4.png\" alt=\"image_3_3.png\"\u003e\u003c/p\u003e\n\u003ch4\u003e4.3 生命周期 \u003ca href=\"#t12\" id=\"t12\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003e\u003cimg src=\"/images/blog/tech/business/image_3_5.png\" alt=\"image_3_5.png\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e账户开立与绑卡\u003c/strong\u003e：同一个人在同一银行只能开立一个\u003ccode\u003eⅠ\u003c/code\u003e类户，\u003ccode\u003eI\u003c/code\u003e类户的设立需要面对面审核，电子渠道开立的\u003ccode\u003eⅡ\u003c/code\u003e类户和\u003ccode\u003eⅢ\u003c/code\u003e类户需绑定银行账户进行验证，不得绑定支付机构账户验证，\u003ccode\u003eⅡ\u003c/code\u003e类户需向绑定账户验证\u003ccode\u003e5\u003c/code\u003e要素（\u003ccode\u003e4\u003c/code\u003e要素：姓名、身份证号、手机号、银行卡号，额外增加账户等级），\u003ccode\u003eⅢ\u003c/code\u003e类户需验证\u003ccode\u003e4\u003c/code\u003e要素，银联支持支持\u003ccode\u003eⅡ\u003c/code\u003e、\u003ccode\u003eⅢ\u003c/code\u003e类账户跨行验证绑定账户信息。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e资金互转\u003c/strong\u003e：对非面对面开立的\u003ccode\u003eⅡ\u003c/code\u003e、\u003ccode\u003eⅢ\u003c/code\u003e类户，限制非绑定账户转入，允许\u003ccode\u003eⅡ\u003c/code\u003e、\u003ccode\u003eⅢ\u003c/code\u003e类户向绑定账户直接借记资金，银联支持\u003ccode\u003eⅡ\u003c/code\u003e、\u003ccode\u003eⅢ\u003c/code\u003e类账户与绑定账户间通过借记和贷记业务实现灵活便捷的资金划付。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e账户使用\u003c/strong\u003e：\u003ccode\u003eI\u003c/code\u003e类账户、对面核实身份的\u003ccode\u003eⅡ\u003c/code\u003e类户可以发行实体银行卡，其他账户不能使用实体银行卡，\u003ccode\u003eⅡ\u003c/code\u003e、\u003ccode\u003eⅢ\u003c/code\u003e类户可以通过云闪付、二维码等支付工具来完成支付，银联支持\u003ccode\u003eⅡ\u003c/code\u003e、\u003ccode\u003eⅢ\u003c/code\u003e类账户便捷生成基于安全芯片、主机卡模拟或二维码等技术的支付工具。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4\u003e4.3 账户建模 \u003ca href=\"#t13\" id=\"t13\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003e在支付系统中，账户的建模，主要是从如下几个方面来考虑：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e交易的需求\u003c/strong\u003e，比如检查账户是否被锁定、余额是否足够、是否有效等。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e记账的需求\u003c/strong\u003e，按照公司会计需求记录账户上的所有行为，包括支出、充值、转账等。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e对账的需求\u003c/strong\u003e，包括和支付渠道、商户、个人的对账需求，核对交易和账户余额是否正确。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e风控的需求\u003c/strong\u003e，如反洗钱、反欺诈等，都需要依赖于账户体系来提供核心数据。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e信用的需求\u003c/strong\u003e，对用户、资产、商户等主体进行信用评估时，也需要依赖账户体系来提供的核心数据。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e这五个需求，按照其设计的优先级，也是从支付、记账、对账、风控来进行。 支付系统根据其发展所处的阶段，逐步将新增需求纳入设计中。说了这么多，目的是为了对账户建模。账户模型是和公司业务密切相关的，公司不同规模，发展的不同阶段需要不同的模型。从交易模型中可以衍生出针对各个角色的账户流水，即明细模型，用于支持对账。根据业务需要，可以设置多种账户，如支付账户、预付卡账户、代扣账户、零钱账户、结算账户等。从类别上来说，这里的账户，一般指总账账户。一般来说电商系统中涉及的账户类型有：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e虚拟币账户\u003c/strong\u003e：用户和使用虚拟币的商户都需要建立虚拟币账户；\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e代扣账户\u003c/strong\u003e： 用来支持订阅类型的定期代扣；\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e零钱账户\u003c/strong\u003e：电商的内部账号，用户、商户、清算单位需要建立零钱账户。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e第三方支付账户\u003c/strong\u003e：用户在第三方支付机构建立的账户。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e银行卡账户\u003c/strong\u003e：用户的银行卡信息，每个卡对应一个账户。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e结算账户\u003c/strong\u003e：用来支持和第三方支付公司、银行进行结算用，第三方支付需要为每个商户号建立结算账户；银行需要为借记卡、贷记卡分别建立结算账户，一般在银行卡直连时使用。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e代扣代缴账户\u003c/strong\u003e：用来支持代扣税款业务。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e对这些账户，需要设置如下属性，基本属性，包括：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e账户号或称为账户 ID\u003c/strong\u003e，一般是系统自动生成。特别注意的是，要事先约定好账户 ID 的规则，比如头三位用来表示账户类型，后几位用来表示账户编号等，务必保证根据账号号能够快速确定账户类型，并且保证账户号是不重复的。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e账户名称\u003c/strong\u003e，一般是由用户自己设置的，显示用。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e账户使用的货币类型\u003c/strong\u003e，注意虽然一张银行卡可以支持多个币种，实际在内部，还是针对每个币种建立独立的子账户。涉及到多币种的账户，也可以采用类似的建模方案。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e会计科目代码\u003c/strong\u003e，一般是一级会计科目的代码。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e账户控制相关：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e是否允许充值；\u003c/li\u003e\n\u003cli\u003e是否允许提现；\u003c/li\u003e\n\u003cli\u003e是否允许透支；\u003c/li\u003e\n\u003cli\u003e是否允许支付；\u003c/li\u003e\n\u003cli\u003e是否允许转账进入；\u003c/li\u003e\n\u003cli\u003e是否允许转账转出；\u003c/li\u003e\n\u003cli\u003e是否有安全保障；\u003c/li\u003e\n\u003cli\u003e是否激活；\u003c/li\u003e\n\u003cli\u003e是否冻结。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e资金相关：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e当前账户余额，等于可用余额+冻结余额；\u003c/li\u003e\n\u003cli\u003e当前账户可用余额；\u003c/li\u003e\n\u003cli\u003e当前账户冻结的余额，冻结余额指在账户上暂不能使用的额度。在支付的时候，往往是先冻结，商品出库后，再实际执行扣款。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e银行卡、第三方支付信息：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e第三方实体的 ID；\u003c/li\u003e\n\u003cli\u003e第三方账号，如银行卡号或者在第三方支付的\u003ccode\u003eopen_id\u003c/code\u003e等；\u003c/li\u003e\n\u003cli\u003e第三方的\u003ccode\u003eapp_id\u003c/code\u003e；\u003c/li\u003e\n\u003cli\u003e账号的失效日期，该账号什么时候失效。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e注意，有些第三方信息是不能保存的，如用户的账号密码、信用卡的 CV 号等。为了避免账户信息被爬库或者数据库信息意外泄露，一般还需要对敏感字段，如密码等，进行加密保存，甚至保存到另外的表中。更进一步，为了避免账户信息被意外修改，还可以增加一个校验字段，在写入数据时设置该字段，在读取数据时做校验，一旦发现数据有问题，则关闭该账号。\u003c/p\u003e\n"])</script><script>self.__next_f.push([1,"6:[\"$\",\"article\",null,{\"className\":\"min-h-screen\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 py-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"rounded-2xl shadow-2xl border border-gray-200 hover:shadow-3xl transition-all duration-300 p-8 sm:p-12\",\"children\":[[\"$\",\"header\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center mb-6\",\"children\":[\"$\",\"div\",null,{\"className\":\"inline-flex items-center px-3 py-1.5 bg-gray-50 text-gray-600 rounded-md text-sm font-normal\",\"children\":[[\"$\",\"svg\",null,{\"className\":\"w-4 h-4 mr-2 text-gray-400\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"viewBox\":\"0 0 24 24\",\"children\":[\"$\",\"path\",null,{\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"strokeWidth\":2,\"d\":\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"}]}],[\"$\",\"time\",null,{\"dateTime\":\"2024-03-01\",\"children\":\"2024年03月01日\"}]]}]}],[\"$\",\"h1\",null,{\"className\":\"text-4xl font-bold text-gray-900 mb-6 text-center\",\"children\":\"用户系统设计——三户模型及三层身份模型\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-wrap gap-2 mb-6 justify-center\",\"children\":[[\"$\",\"$L5\",\"业务架构\",{\"href\":\"/blog/tag/%E4%B8%9A%E5%8A%A1%E6%9E%B6%E6%9E%84/page/1/\",\"className\":\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-200 text-gray-800 hover:bg-gray-300 hover:text-gray-900 transition-colors\",\"children\":\"业务架构\"}]]}]]}],[\"$\",\"div\",null,{\"className\":\"max-w-5xl mx-auto\",\"children\":[\"$\",\"$L14\",null,{\"content\":\"$15\"}]}],[\"$\",\"$11\",null,{\"fallback\":[\"$\",\"div\",null,{\"className\":\"mt-12 pt-8 border-t border-gray-200\",\"children\":\"加载导航中...\"}],\"children\":[\"$\",\"$L16\",null,{\"globalNav\":{\"prev\":{\"slug\":\"urban-exploration\",\"title\":\"城市探索：发现身边的隐藏之美\",\"description\":\"探讨城市探索的艺术，包括如何发现城市中的隐藏景点、历史遗迹、文化地标，以及如何用新的视角重新认识我们生活的城市\",\"pubDate\":\"2024-01-10\",\"tags\":[\"创意与艺术\",\"娱乐与生活\",\"文化与社会\"],\"heroImage\":\"/images/urban-exploration.jpg\",\"content\":\"$17\"},\"next\":{\"slug\":\"tech/business/解析三户模型及建立账户模型\",\"title\":\"解析三户模型及建立账户模型\",\"description\":\"账户体系是支付系统的基础，它的设计直接影响整个系统的特性。这里探讨如何针对电子商务系统的账户体系设计。我们从一些基本概念开始入手，了解怎么建模。三户模型最早是在增强型电信运营图（Enhanced Telecom Operations Map，eTOM）中提出，在电信行业中得到广泛使用。\",\"pubDate\":\"2024-03-03\",\"tags\":[\"业务架构\"],\"heroImage\":\"$undefined\",\"content\":\"$18\"}},\"tagNav\":{\"业务架构\":{\"prev\":null,\"next\":\"$6:props:children:props:children:props:children:2:props:children:props:globalNav:next\"}}}]}],[\"$\",\"$L19\",null,{}]]}]}]}]\n"])</script><script>self.__next_f.push([1,"9:null\n"])</script><script>self.__next_f.push([1,"d:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n8:null\n"])</script><script>self.__next_f.push([1,"b:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"用户系统设计——三户模型及三层身份模型 - Skyfalling Blog\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"三户模型最早是在增强型电信运营图（Enhanced Telecom Operations Map，eTOM）中提出，在电信行业中得到广泛使用。 三户指客户（Customer）、用户（User）和账户(Account)。eTOM 引入是电信行业营销模型转向“以客户为中心”的理念而产生的成果。围绕客户建...\"}],[\"$\",\"meta\",\"2\",{\"property\":\"og:title\",\"content\":\"用户系统设计——三户模型及三层身份模型\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:description\",\"content\":\"三户模型最早是在增强型电信运营图（Enhanced Telecom Operations Map，eTOM）中提出，在电信行业中得到广泛使用。 三户指客户（Customer）、用户（User）和账户(Account)。eTOM 引入是电信行业营销模型转向“以客户为中心”的理念而产生的成果。围绕客户建...\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"5\",{\"property\":\"article:published_time\",\"content\":\"2024-03-01\"}],[\"$\",\"meta\",\"6\",{\"property\":\"article:author\",\"content\":\"Skyfalling\"}],[\"$\",\"meta\",\"7\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"8\",{\"name\":\"twitter:title\",\"content\":\"用户系统设计——三户模型及三层身份模型\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:description\",\"content\":\"三户模型最早是在增强型电信运营图（Enhanced Telecom Operations Map，eTOM）中提出，在电信行业中得到广泛使用。 三户指客户（Customer）、用户（User）和账户(Account)。eTOM 引入是电信行业营销模型转向“以客户为中心”的理念而产生的成果。围绕客户建...\"}],[\"$\",\"link\",\"10\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}],[\"$\",\"link\",\"11\",{\"rel\":\"icon\",\"href\":\"/favicon.svg\"}]],\"error\":null,\"digest\":\"$undefined\"}\n13:{\"metadata\":\"$b:metadata\",\"error\":null,\"digest\":\"$undefined\"}\n"])</script></body></html>