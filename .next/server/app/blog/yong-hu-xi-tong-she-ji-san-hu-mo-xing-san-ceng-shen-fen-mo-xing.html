<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/gitbook/_next/static/media/e4af272ccee01ff0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/gitbook/_next/static/css/443e11d9362f4e82.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/gitbook/_next/static/chunks/webpack-53d905a932a6f993.js"/><script src="/gitbook/_next/static/chunks/4bd1b696-a6a68ffbe959fe28.js" async=""></script><script src="/gitbook/_next/static/chunks/684-776aabfcbdbee233.js" async=""></script><script src="/gitbook/_next/static/chunks/main-app-75103b4b1f3159f6.js" async=""></script><script src="/gitbook/_next/static/chunks/874-80549eca86098588.js" async=""></script><script src="/gitbook/_next/static/chunks/app/layout-f035406da26395a3.js" async=""></script><script src="/gitbook/_next/static/chunks/app/blog/%5B...slug%5D/page-b420037c820534af.js" async=""></script><meta name="next-size-adjust" content=""/><title>Skyfalling</title><meta name="description" content="分享技术、生活和思考的个人博客"/><link rel="icon" href="/favicon.svg"/><script>document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><script src="/gitbook/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__className_feb414"><div hidden=""><!--$--><!--/$--></div><div class="min-h-screen flex flex-col"><header class="bg-white shadow-sm"><nav class="mx-auto flex max-w-7xl items-center justify-between p-6 lg:px-8" aria-label="Global"><div class="flex lg:flex-1"><a class="-m-1.5 p-1.5" href="/gitbook/"><span class="sr-only">Skyfalling Blog</span><span class="text-2xl font-bold text-gray-900">Skyfalling</span></a></div><div class="flex lg:hidden"><button type="button" class="-m-2.5 inline-flex items-center justify-center rounded-md p-2.5 text-gray-700"><span class="sr-only">打开主菜单</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="h-6 w-6"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path></svg></button></div><div class="hidden lg:flex lg:gap-x-12"><a class="text-base font-semibold leading-6 transition-colors text-gray-900 hover:text-blue-600" href="/gitbook/">首页</a><a class="text-base font-semibold leading-6 transition-colors text-blue-600 border-b-2 border-blue-600 pb-1" href="/gitbook/blog/">博客</a><a class="text-base font-semibold leading-6 transition-colors text-gray-900 hover:text-blue-600" href="/gitbook/about/">关于</a></div><div class="hidden lg:flex lg:flex-1 lg:justify-end"><a class="text-base font-semibold leading-6 transition-colors text-gray-900 hover:text-blue-600" href="/gitbook/contact/">联系 <span aria-hidden="true">→</span></a></div></nav></header><main class="flex-1"><article class="py-24 sm:py-32"><div class="mx-auto max-w-3xl px-6 lg:px-8"><div class="xl:relative"><div class="mx-auto max-w-2xl"><div class="text-center"><time dateTime="2024-03-01" class="text-gray-500">2024年03月01日</time><h1 class="mt-6 text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl">用户系统设计:三户模型&amp;三层身份模型</h1><p class="mt-6 text-lg leading-8 text-gray-600">三户模型最早是在增强型电信运营图（Enhanced Telecom Operations Map，eTOM）中提出，在电信行业中得到广泛使用。 三户指客户（Customer）、用户（User）和账户(Account)。eTOM 引入是电信行业营销模型转向“以客户为中心”的理念而产生的成果。围绕客户建...</p><div class="mt-6 flex justify-center gap-2"><a class="rounded-full bg-gray-100 px-3 py-1 text-sm font-medium text-gray-700 hover:bg-gray-200" href="/gitbook/blog/tag/%E4%B8%9A%E5%8A%A1%E6%9E%B6%E6%9E%84/page/1/">业务架构</a></div></div><div class="mt-16 prose prose-lg prose-gray mx-auto"><div class="prose prose-lg prose-gray mx-auto">
<h1>用户系统设计:三户模型&三层身份模型</h1></p><p><h3>三户模型</h3><p>三户模型最早是在增强型电信运营图（Enhanced Telecom Operations Map，eTOM）中提出，在电信行业中得到广泛使用。 三户指客户（Customer）、用户（User）和账户(Account)。eTOM 引入是电信行业营销模型转向“以客户为中心”的理念而产生的成果。围绕客户建立用户和账户。这三个是相互关联的实体，这种关联只是一个归属和映射的关系，而三个实体本身是相互独立的，分别是体现完全不同的几个域的信息，<strong>客户</strong>是体现了<strong>社会域</strong>的信息，<strong>用户</strong>体现了<strong>业务域</strong>的信息，<strong>账户</strong>体现的是<strong>资金域</strong>的信息。</p><p>* 客户（customer）：是指客户（自然人、公司、集团公司）的基本资料信息。例如自然人的姓名、手机号、身份证、邮箱地址等等；公司的五证一照、行业、联系人、网站地址、通讯地址等等。如无特指，一般客户指个人客户。</p>
<p>* 用户（user）：指客户在系统的登录账号信息，包括账号、密码、人员权限、角色等等。对应的，法人客户在系统中注册后，被称之为商户。</p>
<p>* 账户（account）：指客户在系统的虚拟账户，主要与交易记账相关。</p><img src="https://www.biaodianfu.com/wp-content/uploads/2020/09/customer-user-account.png" alt="" /><p>以电信业务为例：</p><p>* 客户：人</p>
<p>* 用户：电信产品的实例表现</p>
<p>* 账户：付费的账号</p><p>假设张三是中国典电信的一个客户，张三办理了一个手机SIM卡和一个宽带业务。其中手机SIM卡和宽带业务分别作为一个用户存在（电信产品实例）。下面还有一个账户的概念，账户是用户进行付费的。一般情况，一个用户只有一个账户，以上例为例，张三有一个账户，为手机号和宽带付费。当然，有的人可能存在多个账户，例如手机号是一个账户，宽带是是一个账户。</p><p>总结一下，一个客户（张三）可以有多个用户（一个手机号和一个宽带业务），但一个用户只能归属于一个客户。一个客户可以用多个账户，但一个账户也只能归属于一个客户。账户和用户的关系比较复杂，一般情况，一个账户可以给多个用户付费，但也允许，一个用户的不同费用由多个账户付费，所以账户和用户之间是多对多的关系。</p><h4>客户</h4><p>客户是一个社会化的概念，一个自然人或一个法人就称之为一个客户，法人客户既可以是一个企业，也可以是与这个企业、集团相关的自然人客户，可以称之为一个集团客户组。</p><p>客户可分为个人客户，企业客户。一个客户可以包含多个用户，客户通过唯一的客户标识来确定。客户描述一个客户的自然属性，客户可以和用户一一对应，也可以和用户一对多。<strong>即使不使用业务，也可能存在客户</strong>，因为客户是自然存在的。客户信息包含客户名，地址，邮政编码，性别，年龄，职业，证件号码等等信息，是自然存在的信息。</p><strong>个人客户</strong></p><p>在互联网系统中，一般是用户先注册，先有用户，然后补充客户身份信息。也就是客户身份信息是在运行过程中逐步完善的。在电信体系或银行体系，客户的主键通常是证件号（如身份证），将所有相同的证件视为同一客户。在互联网行业通常是将手机号识别为主键（<strong>注意：手机号有注销、更换等问题</strong>），这里面就有一个关键业务，既然相同证件的证件号或手机号会识别成一个客户，当相同的证件号或手机号进入系统时，系统是如何处理的？当然是合成一个了，这个过程叫做客户归并，即：将客户合成同一个客户号的过程，我们称为归并。归并是有风险的，所以需要一些<strong>鉴权手段</strong>来处理。</p><p>在互联网应用中，一个系统中的生命周期如下：</p><img src="https://www.biaodianfu.com/wp-content/uploads/2020/09/customer.png" alt="" /><p>正常的互联网站点一般只有正常和禁入2种状态，银行业可能还会包含冻结和止付状态（以司法协查为例，某个客户被协查以致账户冻结，需要冻结该客户下所有资金账户，这些账户都被止付）。</p><p>注意在这个流程中<strong>没有销户的状态</strong>。 这是为了<strong>支持历史业务的处理</strong>，客户一般不做销户。 此外这个流程和支付账户的流程比较类似，这是为了方便在客户层面做账户控制。</p><p><strong>存在问题，用户手机号更换带来的身份识别不能解决。</strong></p><p><strong>企业客户</strong><p>企业客户相对个人客户来说比较复杂点，但三户模型仍然适用。企业客户是一个组织，其账户必然是组织授权内部人员去操作。但是这个操作人，同个人客户一样，只是系统的使用者，即用户。企业的资金比较大，并且有严格的业务流程，所以在系统使用上，一般是多个用户操作一个或多个资金账户。这种关系本身来说，也是一种授权关系，企业授权相应的用户来操作特定的资金账户，只不过为了管理方便，可以引入角色管理机制来实现。对于支付公司来说，企业客户通常都是发展商户过程中产生的。企业客户的识别同个人客户识别也是一样的，通过企业证件来统一识别。相同的企业证件号归并到同一个企业客户下面。建立企业客户的好处在于：</p><p>* 有些企业本身只开通了企业服务业务，而不开通商户服务</p>
<p>* 一个企业可以开通多个商户，企业客户是这些多个商户的统计口径</p><h4>用户</h4></p><p>用户是在产品基础上产生的实体。如果说一个客户使用了多个产品，那么一个客户就会对应好几个用户（即产品）。</p><strong>个体用户</strong></p><p>用户与资金账户之间我们可以抽象出一种授权关系，凡是授权用户，都可以操作资金账户，当然，这种授权包括客户自己的用户。用户的建立比较简单，一般自助注册后就可以生成用户实体了。</p><p>用户的生命周期如下：</p><img src="https://www.biaodianfu.com/wp-content/uploads/2020/09/user.png" alt="" /><p>如果用户想要销户，收到销户申请后，不能直接销户，客户是通过用户来进行资金账户的管理与操作的，所以，此时有个确认过程，要求各业务系统确认此用户下的所有账户是否可以销户，如果没有问题，先销资金账户，当用户下的所有资金账户都销户完毕，再销用户，用户销户完成后，会释放出此用户占用的资源，如注册手机号。</p><p>在互联网环境比较多的场景是用户更新手机号，用户更新手机号的时候涉及到的两个手机号都需要验证。需要注意的是， 更新手机号需要涉及到更新客户ID。</p><p>用户除了生命周期状态外，还有一个管理状态，比如锁定，从现实模型中来说，这个是不应该放在用户层面的而是放在账户层面上的，但互联网模式下，一个用户有多个资金账户，为了用户体验，把这些放在了用户层面上了，就如同支付密码放在用户层面上一样。</p><p><strong>商户</strong><p>商户是企业客户的一个业务影子，或是看成资金账户分组的一个手段。商户是客户一个外围业务，如果把它看成用户平级层面也是可以的，即：此商户所有业务产生的资金进入到一个分类资金账户里。不论怎么说，一个企业不论开多少个商户，每个商户又开通多少个资金账户，都改变不了资金账户的归属关系，它是现实客户这个实体的。</p><p><h4>账户</h4><p>账户的概念起源于金融业，只是一个客户存放资金的实体，目的是为选择的产品付费。一个客户可以拥有一个账户也可以拥有多个账户，账户上的资金可以为客户本人的用户付费，也可以为其他客户的用户付费，这种付费关系需要一个付费规则进行关联。</p><p>既然账户关系到付费规则，必然会引出账单的概念。一般来首先要生成用户账单，账单应该归属于用户。</p><p>账单分为两级，客户账单和用户账单：</p><p>* 客户账单是根据用户账单按照规则进行简单的算术加和得到的。</p>
<p>* 用户账单可以进一步细分为账单项，账单项是为客户打印账单提供清晰明了的消费明细。</p><p>账单应当归属于用户，为客户提供的账单应当以产品为单元来生成账单，一般的消费习惯都是以产品为单元来付费；但同时也应该生成客户账单，如果一个客户选择了运营商的多个产品，那么客户如果需要一个所有产品的账单，运营商应当提供，同时集团客户需要一个集团所有客户的消费明细，也需要有一个集团客户账单。</p><p>用户和账户的映射关系，主要就是销账规则。销账流程中处理模型应当也是按照用户的账单来销账，而不是按照客户账单，客户的账单应当只是用户账单的简单算术运算的得到的账单，只提供打印。</p><p>客户和账户应当有一个归属的对应规则，该规则应当是一种归属关系，个人账户应该归属于个人客户，集团账户应当归属于集团客户。但这只是一种归属关系，而没有付费关系，账户可以跨客户为几个用户付费，也可以为单个用户账单的某个账目付费。</p><p>产品在市场提供时难免会遇到，产品的某项子功能的交叉优惠，这种交叉优惠，应当打包成为一个产品。在具体的系统模型中的体现就是增加一个用户，并赋予一定的资费，同时指定一个账户来为其销账，就统一了整个模型。</p><p>账户的生命周期：</p><img src="https://www.biaodianfu.com/wp-content/uploads/2020/09/account.png" alt="" /><strong>账户建模</strong><p>在支付系统中，账户的建模，主要是从如下几个方面来考虑：</p><p>* 交易的需求，比如检查账户是否被锁定、余额是否足够、是否有效等。</p>
<p>* 记账的需求，按照公司会计需求记录账户上的所有行为，包括支出、充值、转账等。</p>
<p>* 对账的需求，包括和支付渠道、商户、个人的对账需求，核对交易和账户余额是否正确。</p>
<p>* 风控的需求，如反洗钱、反欺诈等，都需要依赖于账户体系来提供核心数据。</p>
<p>* 信用的需求，对用户、资产、商户等主体进行信用评估时，也需要依赖账户体系来提供的核心数据。</p><p>这五个需求，按照其设计的优先级，也是从支付、记账、对账、风控来进行。支付系统根据其发展所处的阶段，逐步将新增需求纳入设计中。</p><p>根据业务需要，可以设置多种账户，如支付账户、预付卡账户、代扣账户、零钱账户、结算账户等。一般来说电商系统中涉及的账户类型有：</p><p>* 虚拟币账号：用户和使用虚拟币的商户都需要建立虚拟币账户。</p>
<p>* 代扣账号： 用来支持订阅类型的定期代扣；</p>
<p>* 零钱账号：即电商的内部账号，用户、商户、清算单位需要建立零钱账户</p>
<p>* 第三方支付账号：用户在第三方支付机构建立的账户。</p>
<p>* 银行卡账号：用户的银行卡信息，每个卡对应一个账户。</p>
<p>* 结算账号：用来支持和第三方支付公司、银行进行结算用。 第三方支付需要为每个商户号建立结算账号；银行需要为借记卡、贷记卡分别建立结算账号（有必要吗？银行卡直连时使用）。</p>
<p>* 代扣代缴账户：用来支持代扣税款业务。</p><p>注意，有些第三方信息是不能保存的，如信用卡的CV号等。</p><h3>三层身份模型</h3></p><p>从使用层面，三户模型更加适合交易类网站，三层身份模型可能更加适合社交性质的网站。三层身份模型将用户分层三个层次，分别为：账户标识符，登录标识符和公开标识符。翻译成大白话可以是：账户ID、登陆账号、昵称。</p><img src="https://www.biaodianfu.com/wp-content/uploads/2020/09/the-tripartite-identity-pattern.gif" alt="" /><p><h4>账户标识符（DB Key）</h4></p><p>从软件工程的角度，需要在数据库中存在一个用户标识(key)来记录每个用户的记录。这个用户标识可能会被用在Cookies或者URL中，这个账户标识符必须是永久的、唯一的。通常是由系统自动生成的一个ID，这个ID不受用户的控制，从用户角度这个标识符应该是不不可见或至少是惰性的，这个标识符不应该与一些公共名称，比如手机号或邮箱。</p><p><h4>登录标识符（会话认证）</h4></p><p>在创建与账户标识符关联的有效会话（Session）时，登陆标识符时必须要的，他们用来从服务中获取授权。通常由唯一的账号/密码对表示（这里的账号可以是邮箱或手机号，也可以是用户选择的用户名）。注意，账户/密码并不是一定需要存在的，比如通过oAuth形式的授权登陆（类似微信登陆、微博登陆等）。</p><p>将登陆标识符与账户标识符分开，可以使得用户更加容易的改变登陆方式。由于账户标识符不需要更改，因此可以避免更换登陆方式或登陆账号带来的数据迁移问题。最重要的是，可以提供多个不同登陆标识符附加到单个账户上，从而可以允许服务聚合从多个身份供应商收集的信息。（如授权获得微信或微博的个人信息）</p><p><h4>公开标识符（社会标识）</h4><p>与账户标识符和登陆标识符不同，公开标识符标识用户希望如何被服务商的其他用户感知。在线用户的公共标识符通常是复合对象：照片，昵称，可能还有年龄，性别和位置。它为任何观众提供了足够的信息，可以快速解读个人背景。公共标识符通常链接到详细的用户配置文件，其中可以进一步识别身份。公开标识符在某些情况下需要唯一（比如类似微博的@功能），有时是不需要唯一的（如微信的昵称）。</p>
</div></div><div class="mt-16 flex items-center justify-between border-t border-gray-200 pt-8"><a class="relative z-10 rounded-md px-4 py-2 text-sm font-semibold leading-6 text-gray-900 hover:text-blue-600 hover:bg-gray-50" href="/gitbook/blog/">← 返回博客列表</a></div><div class="mt-8 grid grid-cols-1 gap-8 border-t border-gray-200 pt-8 lg:grid-cols-2"><div class="group"><div class="flex items-center gap-x-3"><div class="text-sm text-gray-500">上一篇</div></div><h3 class="mt-2 text-lg font-semibold leading-6 text-gray-900 group-hover:text-gray-600"><a href="/gitbook/blog/zai-xian-guang-gao-ye-wu/"><span class="absolute inset-0"></span>在线广告业务</a></h3><p class="mt-3 text-sm leading-6 text-gray-600 line-clamp-2">...</p></div><div class="group"><div class="flex items-center gap-x-3"><div class="text-sm text-gray-500">下一篇</div></div><h3 class="mt-2 text-lg font-semibold leading-6 text-gray-900 group-hover:text-gray-600"><a href="/gitbook/blog/jie-xi-san-hu-mo-xing-ji-jian-li-zhang-hu-mo-xing/"><span class="absolute inset-0"></span>解析「三户模型」及建立账户模型</a></h3><p class="mt-3 text-sm leading-6 text-gray-600 line-clamp-2">　　账户体系是支付系统的基础，它的设计直接影响整个系统的特性。这里探讨如何针对电子商务系统的账户体系设计。我们从一些基本概念开始入手，了解怎么建模。 　　三户模型最早是在增强型电信运营图（Enhanced Telecom Operations Map，eTOM）中提出，在电信行业中得到广泛使用。 三...</p></div></div></div></div></div></article><!--$--><!--/$--></main><footer class="bg-gray-900"><div class="mx-auto max-w-7xl px-6 py-12 md:flex md:items-center md:justify-between lg:px-8"><div class="flex justify-center space-x-6 md:order-2"><a class="text-gray-400 hover:text-gray-300" href="/gitbook/about/">关于</a><a class="text-gray-400 hover:text-gray-300" href="/gitbook/blog/">博客</a><a class="text-gray-400 hover:text-gray-300" href="/gitbook/contact/">联系</a></div><div class="mt-8 md:order-1 md:mt-0"><p class="text-center text-xs leading-5 text-gray-400">© 2024 Skyfalling Blog. All rights reserved.</p></div></div></footer></div><script src="/gitbook/_next/static/chunks/webpack-53d905a932a6f993.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[5651,[\"874\",\"static/chunks/874-80549eca86098588.js\",\"177\",\"static/chunks/app/layout-f035406da26395a3.js\"],\"default\"]\n3:I[7555,[],\"\"]\n4:I[1295,[],\"\"]\n5:I[6874,[\"874\",\"static/chunks/874-80549eca86098588.js\",\"909\",\"static/chunks/app/blog/%5B...slug%5D/page-b420037c820534af.js\"],\"\"]\n7:I[9665,[],\"OutletBoundary\"]\na:I[4911,[],\"AsyncMetadataOutlet\"]\nc:I[9665,[],\"ViewportBoundary\"]\ne:I[9665,[],\"MetadataBoundary\"]\n10:I[6614,[],\"\"]\n:HL[\"/gitbook/_next/static/media/e4af272ccee01ff0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/gitbook/_next/static/css/443e11d9362f4e82.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"vtR8vRym_dmCF4uoCEze4\",\"p\":\"/gitbook\",\"c\":[\"\",\"blog\",\"yong-hu-xi-tong-she-ji-san-hu-mo-xing-san-ceng-shen-fen-mo-xing\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"yong-hu-xi-tong-she-ji-san-hu-mo-xing-san-ceng-shen-fen-mo-xing\",\"c\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/gitbook/_next/static/css/443e11d9362f4e82.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"zh-CN\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_feb414\",\"children\":[\"$\",\"div\",null,{\"className\":\"min-h-screen flex flex-col\",\"children\":[[\"$\",\"$L2\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1\",\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"footer\",null,{\"className\":\"bg-gray-900\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-7xl px-6 py-12 md:flex md:items-center md:justify-between lg:px-8\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex justify-center space-x-6 md:order-2\",\"children\":[[\"$\",\"$L5\",null,{\"href\":\"/about\",\"className\":\"text-gray-400 hover:text-gray-300\",\"children\":\"关于\"}],[\"$\",\"$L5\",null,{\"href\":\"/blog\",\"className\":\"text-gray-400 hover:text-gray-300\",\"children\":\"博客\"}],[\"$\",\"$L5\",null,{\"href\":\"/contact\",\"className\":\"text-gray-400 hover:text-gray-300\",\"children\":\"联系\"}]]}],[\"$\",\"div\",null,{\"className\":\"mt-8 md:order-1 md:mt-0\",\"children\":[\"$\",\"p\",null,{\"className\":\"text-center text-xs leading-5 text-gray-400\",\"children\":\"© 2024 Skyfalling Blog. All rights reserved.\"}]}]]}]}]]}]}]}]]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"yong-hu-xi-tong-she-ji-san-hu-mo-xing-san-ceng-shen-fen-mo-xing\",\"c\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L6\",null,[\"$\",\"$L7\",null,{\"children\":[\"$L8\",\"$L9\",[\"$\",\"$La\",null,{\"promise\":\"$@b\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"ZfHApsQWUjpQ-KqFJwP_fv\",{\"children\":[[\"$\",\"$Lc\",null,{\"children\":\"$Ld\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$10\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"11:\"$Sreact.suspense\"\n12:I[4911,[],\"AsyncMetadata\"]\nf:[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$11\",null,{\"fallback\":null,\"children\":[\"$\",\"$L12\",null,{\"promise\":\"$@13\"}]}]}]\n14:T39cf,"])</script><script>self.__next_f.push([1,"\n\u003ch1\u003e用户系统设计:三户模型\u0026三层身份模型\u003c/h1\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003e三户模型\u003c/h3\u003e\u003cp\u003e三户模型最早是在增强型电信运营图（Enhanced Telecom Operations Map，eTOM）中提出，在电信行业中得到广泛使用。 三户指客户（Customer）、用户（User）和账户(Account)。eTOM 引入是电信行业营销模型转向“以客户为中心”的理念而产生的成果。围绕客户建立用户和账户。这三个是相互关联的实体，这种关联只是一个归属和映射的关系，而三个实体本身是相互独立的，分别是体现完全不同的几个域的信息，\u003cstrong\u003e客户\u003c/strong\u003e是体现了\u003cstrong\u003e社会域\u003c/strong\u003e的信息，\u003cstrong\u003e用户\u003c/strong\u003e体现了\u003cstrong\u003e业务域\u003c/strong\u003e的信息，\u003cstrong\u003e账户\u003c/strong\u003e体现的是\u003cstrong\u003e资金域\u003c/strong\u003e的信息。\u003c/p\u003e\u003cp\u003e* 客户（customer）：是指客户（自然人、公司、集团公司）的基本资料信息。例如自然人的姓名、手机号、身份证、邮箱地址等等；公司的五证一照、行业、联系人、网站地址、通讯地址等等。如无特指，一般客户指个人客户。\u003c/p\u003e\n\u003cp\u003e* 用户（user）：指客户在系统的登录账号信息，包括账号、密码、人员权限、角色等等。对应的，法人客户在系统中注册后，被称之为商户。\u003c/p\u003e\n\u003cp\u003e* 账户（account）：指客户在系统的虚拟账户，主要与交易记账相关。\u003c/p\u003e\u003cimg src=\"https://www.biaodianfu.com/wp-content/uploads/2020/09/customer-user-account.png\" alt=\"\" /\u003e\u003cp\u003e以电信业务为例：\u003c/p\u003e\u003cp\u003e* 客户：人\u003c/p\u003e\n\u003cp\u003e* 用户：电信产品的实例表现\u003c/p\u003e\n\u003cp\u003e* 账户：付费的账号\u003c/p\u003e\u003cp\u003e假设张三是中国典电信的一个客户，张三办理了一个手机SIM卡和一个宽带业务。其中手机SIM卡和宽带业务分别作为一个用户存在（电信产品实例）。下面还有一个账户的概念，账户是用户进行付费的。一般情况，一个用户只有一个账户，以上例为例，张三有一个账户，为手机号和宽带付费。当然，有的人可能存在多个账户，例如手机号是一个账户，宽带是是一个账户。\u003c/p\u003e\u003cp\u003e总结一下，一个客户（张三）可以有多个用户（一个手机号和一个宽带业务），但一个用户只能归属于一个客户。一个客户可以用多个账户，但一个账户也只能归属于一个客户。账户和用户的关系比较复杂，一般情况，一个账户可以给多个用户付费，但也允许，一个用户的不同费用由多个账户付费，所以账户和用户之间是多对多的关系。\u003c/p\u003e\u003ch4\u003e客户\u003c/h4\u003e\u003cp\u003e客户是一个社会化的概念，一个自然人或一个法人就称之为一个客户，法人客户既可以是一个企业，也可以是与这个企业、集团相关的自然人客户，可以称之为一个集团客户组。\u003c/p\u003e\u003cp\u003e客户可分为个人客户，企业客户。一个客户可以包含多个用户，客户通过唯一的客户标识来确定。客户描述一个客户的自然属性，客户可以和用户一一对应，也可以和用户一对多。\u003cstrong\u003e即使不使用业务，也可能存在客户\u003c/strong\u003e，因为客户是自然存在的。客户信息包含客户名，地址，邮政编码，性别，年龄，职业，证件号码等等信息，是自然存在的信息。\u003c/p\u003e\u003cstrong\u003e个人客户\u003c/strong\u003e\u003c/p\u003e\u003cp\u003e在互联网系统中，一般是用户先注册，先有用户，然后补充客户身份信息。也就是客户身份信息是在运行过程中逐步完善的。在电信体系或银行体系，客户的主键通常是证件号（如身份证），将所有相同的证件视为同一客户。在互联网行业通常是将手机号识别为主键（\u003cstrong\u003e注意：手机号有注销、更换等问题\u003c/strong\u003e），这里面就有一个关键业务，既然相同证件的证件号或手机号会识别成一个客户，当相同的证件号或手机号进入系统时，系统是如何处理的？当然是合成一个了，这个过程叫做客户归并，即：将客户合成同一个客户号的过程，我们称为归并。归并是有风险的，所以需要一些\u003cstrong\u003e鉴权手段\u003c/strong\u003e来处理。\u003c/p\u003e\u003cp\u003e在互联网应用中，一个系统中的生命周期如下：\u003c/p\u003e\u003cimg src=\"https://www.biaodianfu.com/wp-content/uploads/2020/09/customer.png\" alt=\"\" /\u003e\u003cp\u003e正常的互联网站点一般只有正常和禁入2种状态，银行业可能还会包含冻结和止付状态（以司法协查为例，某个客户被协查以致账户冻结，需要冻结该客户下所有资金账户，这些账户都被止付）。\u003c/p\u003e\u003cp\u003e注意在这个流程中\u003cstrong\u003e没有销户的状态\u003c/strong\u003e。 这是为了\u003cstrong\u003e支持历史业务的处理\u003c/strong\u003e，客户一般不做销户。 此外这个流程和支付账户的流程比较类似，这是为了方便在客户层面做账户控制。\u003c/p\u003e\u003cp\u003e\u003cstrong\u003e存在问题，用户手机号更换带来的身份识别不能解决。\u003c/strong\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003e企业客户\u003c/strong\u003e\u003cp\u003e企业客户相对个人客户来说比较复杂点，但三户模型仍然适用。企业客户是一个组织，其账户必然是组织授权内部人员去操作。但是这个操作人，同个人客户一样，只是系统的使用者，即用户。企业的资金比较大，并且有严格的业务流程，所以在系统使用上，一般是多个用户操作一个或多个资金账户。这种关系本身来说，也是一种授权关系，企业授权相应的用户来操作特定的资金账户，只不过为了管理方便，可以引入角色管理机制来实现。对于支付公司来说，企业客户通常都是发展商户过程中产生的。企业客户的识别同个人客户识别也是一样的，通过企业证件来统一识别。相同的企业证件号归并到同一个企业客户下面。建立企业客户的好处在于：\u003c/p\u003e\u003cp\u003e* 有些企业本身只开通了企业服务业务，而不开通商户服务\u003c/p\u003e\n\u003cp\u003e* 一个企业可以开通多个商户，企业客户是这些多个商户的统计口径\u003c/p\u003e\u003ch4\u003e用户\u003c/h4\u003e\u003c/p\u003e\u003cp\u003e用户是在产品基础上产生的实体。如果说一个客户使用了多个产品，那么一个客户就会对应好几个用户（即产品）。\u003c/p\u003e\u003cstrong\u003e个体用户\u003c/strong\u003e\u003c/p\u003e\u003cp\u003e用户与资金账户之间我们可以抽象出一种授权关系，凡是授权用户，都可以操作资金账户，当然，这种授权包括客户自己的用户。用户的建立比较简单，一般自助注册后就可以生成用户实体了。\u003c/p\u003e\u003cp\u003e用户的生命周期如下：\u003c/p\u003e\u003cimg src=\"https://www.biaodianfu.com/wp-content/uploads/2020/09/user.png\" alt=\"\" /\u003e\u003cp\u003e如果用户想要销户，收到销户申请后，不能直接销户，客户是通过用户来进行资金账户的管理与操作的，所以，此时有个确认过程，要求各业务系统确认此用户下的所有账户是否可以销户，如果没有问题，先销资金账户，当用户下的所有资金账户都销户完毕，再销用户，用户销户完成后，会释放出此用户占用的资源，如注册手机号。\u003c/p\u003e\u003cp\u003e在互联网环境比较多的场景是用户更新手机号，用户更新手机号的时候涉及到的两个手机号都需要验证。需要注意的是， 更新手机号需要涉及到更新客户ID。\u003c/p\u003e\u003cp\u003e用户除了生命周期状态外，还有一个管理状态，比如锁定，从现实模型中来说，这个是不应该放在用户层面的而是放在账户层面上的，但互联网模式下，一个用户有多个资金账户，为了用户体验，把这些放在了用户层面上了，就如同支付密码放在用户层面上一样。\u003c/p\u003e\u003cp\u003e\u003cstrong\u003e商户\u003c/strong\u003e\u003cp\u003e商户是企业客户的一个业务影子，或是看成资金账户分组的一个手段。商户是客户一个外围业务，如果把它看成用户平级层面也是可以的，即：此商户所有业务产生的资金进入到一个分类资金账户里。不论怎么说，一个企业不论开多少个商户，每个商户又开通多少个资金账户，都改变不了资金账户的归属关系，它是现实客户这个实体的。\u003c/p\u003e\u003cp\u003e\u003ch4\u003e账户\u003c/h4\u003e\u003cp\u003e账户的概念起源于金融业，只是一个客户存放资金的实体，目的是为选择的产品付费。一个客户可以拥有一个账户也可以拥有多个账户，账户上的资金可以为客户本人的用户付费，也可以为其他客户的用户付费，这种付费关系需要一个付费规则进行关联。\u003c/p\u003e\u003cp\u003e既然账户关系到付费规则，必然会引出账单的概念。一般来首先要生成用户账单，账单应该归属于用户。\u003c/p\u003e\u003cp\u003e账单分为两级，客户账单和用户账单：\u003c/p\u003e\u003cp\u003e* 客户账单是根据用户账单按照规则进行简单的算术加和得到的。\u003c/p\u003e\n\u003cp\u003e* 用户账单可以进一步细分为账单项，账单项是为客户打印账单提供清晰明了的消费明细。\u003c/p\u003e\u003cp\u003e账单应当归属于用户，为客户提供的账单应当以产品为单元来生成账单，一般的消费习惯都是以产品为单元来付费；但同时也应该生成客户账单，如果一个客户选择了运营商的多个产品，那么客户如果需要一个所有产品的账单，运营商应当提供，同时集团客户需要一个集团所有客户的消费明细，也需要有一个集团客户账单。\u003c/p\u003e\u003cp\u003e用户和账户的映射关系，主要就是销账规则。销账流程中处理模型应当也是按照用户的账单来销账，而不是按照客户账单，客户的账单应当只是用户账单的简单算术运算的得到的账单，只提供打印。\u003c/p\u003e\u003cp\u003e客户和账户应当有一个归属的对应规则，该规则应当是一种归属关系，个人账户应该归属于个人客户，集团账户应当归属于集团客户。但这只是一种归属关系，而没有付费关系，账户可以跨客户为几个用户付费，也可以为单个用户账单的某个账目付费。\u003c/p\u003e\u003cp\u003e产品在市场提供时难免会遇到，产品的某项子功能的交叉优惠，这种交叉优惠，应当打包成为一个产品。在具体的系统模型中的体现就是增加一个用户，并赋予一定的资费，同时指定一个账户来为其销账，就统一了整个模型。\u003c/p\u003e\u003cp\u003e账户的生命周期：\u003c/p\u003e\u003cimg src=\"https://www.biaodianfu.com/wp-content/uploads/2020/09/account.png\" alt=\"\" /\u003e\u003cstrong\u003e账户建模\u003c/strong\u003e\u003cp\u003e在支付系统中，账户的建模，主要是从如下几个方面来考虑：\u003c/p\u003e\u003cp\u003e* 交易的需求，比如检查账户是否被锁定、余额是否足够、是否有效等。\u003c/p\u003e\n\u003cp\u003e* 记账的需求，按照公司会计需求记录账户上的所有行为，包括支出、充值、转账等。\u003c/p\u003e\n\u003cp\u003e* 对账的需求，包括和支付渠道、商户、个人的对账需求，核对交易和账户余额是否正确。\u003c/p\u003e\n\u003cp\u003e* 风控的需求，如反洗钱、反欺诈等，都需要依赖于账户体系来提供核心数据。\u003c/p\u003e\n\u003cp\u003e* 信用的需求，对用户、资产、商户等主体进行信用评估时，也需要依赖账户体系来提供的核心数据。\u003c/p\u003e\u003cp\u003e这五个需求，按照其设计的优先级，也是从支付、记账、对账、风控来进行。支付系统根据其发展所处的阶段，逐步将新增需求纳入设计中。\u003c/p\u003e\u003cp\u003e根据业务需要，可以设置多种账户，如支付账户、预付卡账户、代扣账户、零钱账户、结算账户等。一般来说电商系统中涉及的账户类型有：\u003c/p\u003e\u003cp\u003e* 虚拟币账号：用户和使用虚拟币的商户都需要建立虚拟币账户。\u003c/p\u003e\n\u003cp\u003e* 代扣账号： 用来支持订阅类型的定期代扣；\u003c/p\u003e\n\u003cp\u003e* 零钱账号：即电商的内部账号，用户、商户、清算单位需要建立零钱账户\u003c/p\u003e\n\u003cp\u003e* 第三方支付账号：用户在第三方支付机构建立的账户。\u003c/p\u003e\n\u003cp\u003e* 银行卡账号：用户的银行卡信息，每个卡对应一个账户。\u003c/p\u003e\n\u003cp\u003e* 结算账号：用来支持和第三方支付公司、银行进行结算用。 第三方支付需要为每个商户号建立结算账号；银行需要为借记卡、贷记卡分别建立结算账号（有必要吗？银行卡直连时使用）。\u003c/p\u003e\n\u003cp\u003e* 代扣代缴账户：用来支持代扣税款业务。\u003c/p\u003e\u003cp\u003e注意，有些第三方信息是不能保存的，如信用卡的CV号等。\u003c/p\u003e\u003ch3\u003e三层身份模型\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e从使用层面，三户模型更加适合交易类网站，三层身份模型可能更加适合社交性质的网站。三层身份模型将用户分层三个层次，分别为：账户标识符，登录标识符和公开标识符。翻译成大白话可以是：账户ID、登陆账号、昵称。\u003c/p\u003e\u003cimg src=\"https://www.biaodianfu.com/wp-content/uploads/2020/09/the-tripartite-identity-pattern.gif\" alt=\"\" /\u003e\u003cp\u003e\u003ch4\u003e账户标识符（DB Key）\u003c/h4\u003e\u003c/p\u003e\u003cp\u003e从软件工程的角度，需要在数据库中存在一个用户标识(key)来记录每个用户的记录。这个用户标识可能会被用在Cookies或者URL中，这个账户标识符必须是永久的、唯一的。通常是由系统自动生成的一个ID，这个ID不受用户的控制，从用户角度这个标识符应该是不不可见或至少是惰性的，这个标识符不应该与一些公共名称，比如手机号或邮箱。\u003c/p\u003e\u003cp\u003e\u003ch4\u003e登录标识符（会话认证）\u003c/h4\u003e\u003c/p\u003e\u003cp\u003e在创建与账户标识符关联的有效会话（Session）时，登陆标识符时必须要的，他们用来从服务中获取授权。通常由唯一的账号/密码对表示（这里的账号可以是邮箱或手机号，也可以是用户选择的用户名）。注意，账户/密码并不是一定需要存在的，比如通过oAuth形式的授权登陆（类似微信登陆、微博登陆等）。\u003c/p\u003e\u003cp\u003e将登陆标识符与账户标识符分开，可以使得用户更加容易的改变登陆方式。由于账户标识符不需要更改，因此可以避免更换登陆方式或登陆账号带来的数据迁移问题。最重要的是，可以提供多个不同登陆标识符附加到单个账户上，从而可以允许服务聚合从多个身份供应商收集的信息。（如授权获得微信或微博的个人信息）\u003c/p\u003e\u003cp\u003e\u003ch4\u003e公开标识符（社会标识）\u003c/h4\u003e\u003cp\u003e与账户标识符和登陆标识符不同，公开标识符标识用户希望如何被服务商的其他用户感知。在线用户的公共标识符通常是复合对象：照片，昵称，可能还有年龄，性别和位置。它为任何观众提供了足够的信息，可以快速解读个人背景。公共标识符通常链接到详细的用户配置文件，其中可以进一步识别身份。公开标识符在某些情况下需要唯一（比如类似微博的@功能），有时是不需要唯一的（如微信的昵称）。\u003c/p\u003e\n"])</script><script>self.__next_f.push([1,"6:[\"$\",\"article\",null,{\"className\":\"py-24 sm:py-32\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-3xl px-6 lg:px-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"xl:relative\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-2xl\",\"children\":[[\"$\",\"div\",null,{\"className\":\"text-center\",\"children\":[[\"$\",\"time\",null,{\"dateTime\":\"2024-03-01\",\"className\":\"text-gray-500\",\"children\":\"2024年03月01日\"}],[\"$\",\"h1\",null,{\"className\":\"mt-6 text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl\",\"children\":\"用户系统设计:三户模型\u0026三层身份模型\"}],[\"$\",\"p\",null,{\"className\":\"mt-6 text-lg leading-8 text-gray-600\",\"children\":\"三户模型最早是在增强型电信运营图（Enhanced Telecom Operations Map，eTOM）中提出，在电信行业中得到广泛使用。 三户指客户（Customer）、用户（User）和账户(Account)。eTOM 引入是电信行业营销模型转向“以客户为中心”的理念而产生的成果。围绕客户建...\"}],[\"$\",\"div\",null,{\"className\":\"mt-6 flex justify-center gap-2\",\"children\":[[\"$\",\"$L5\",\"业务架构\",{\"href\":\"/blog/tag/%E4%B8%9A%E5%8A%A1%E6%9E%B6%E6%9E%84/page/1\",\"className\":\"rounded-full bg-gray-100 px-3 py-1 text-sm font-medium text-gray-700 hover:bg-gray-200\",\"children\":\"业务架构\"}]]}]]}],[\"$\",\"div\",null,{\"className\":\"mt-16 prose prose-lg prose-gray mx-auto\",\"children\":[\"$\",\"div\",null,{\"className\":\"prose prose-lg prose-gray mx-auto\",\"dangerouslySetInnerHTML\":{\"__html\":\"$14\"}}]}],[\"$\",\"div\",null,{\"className\":\"mt-16 flex items-center justify-between border-t border-gray-200 pt-8\",\"children\":[\"$\",\"$L5\",null,{\"href\":\"/blog\",\"className\":\"relative z-10 rounded-md px-4 py-2 text-sm font-semibold leading-6 text-gray-900 hover:text-blue-600 hover:bg-gray-50\",\"children\":\"← 返回博客列表\"}]}],[\"$\",\"div\",null,{\"className\":\"mt-8 grid grid-cols-1 gap-8 border-t border-gray-200 pt-8 lg:grid-cols-2\",\"children\":[[\"$\",\"div\",null,{\"className\":\"group\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center gap-x-3\",\"children\":[\"$\",\"div\",null,{\"className\":\"text-sm text-gray-500\",\"children\":\"上一篇\"}]}],[\"$\",\"h3\",null,{\"className\":\"mt-2 text-lg font-semibold leading-6 text-gray-900 group-hover:text-gray-600\",\"children\":[\"$\",\"$L5\",null,{\"href\":\"/blog/zai-xian-guang-gao-ye-wu\",\"children\":[[\"$\",\"span\",null,{\"className\":\"absolute inset-0\"}],\"在线广告业务\"]}]}],[\"$\",\"p\",null,{\"className\":\"mt-3 text-sm leading-6 text-gray-600 line-clamp-2\",\"children\":\"...\"}]]}],[\"$\",\"div\",null,{\"className\":\"group\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center gap-x-3\",\"children\":[\"$\",\"div\",null,{\"className\":\"text-sm text-gray-500\",\"children\":\"下一篇\"}]}],[\"$\",\"h3\",null,{\"className\":\"mt-2 text-lg font-semibold leading-6 text-gray-900 group-hover:text-gray-600\",\"children\":[\"$\",\"$L5\",null,{\"href\":\"/blog/jie-xi-san-hu-mo-xing-ji-jian-li-zhang-hu-mo-xing\",\"children\":[[\"$\",\"span\",null,{\"className\":\"absolute inset-0\"}],\"解析「三户模型」及建立账户模型\"]}]}],[\"$\",\"p\",null,{\"className\":\"mt-3 text-sm leading-6 text-gray-600 line-clamp-2\",\"children\":\"　　账户体系是支付系统的基础，它的设计直接影响整个系统的特性。这里探讨如何针对电子商务系统的账户体系设计。我们从一些基本概念开始入手，了解怎么建模。 　　三户模型最早是在增强型电信运营图（Enhanced Telecom Operations Map，eTOM）中提出，在电信行业中得到广泛使用。 三...\"}]]}]]}]]}]}]}]}]\n"])</script><script>self.__next_f.push([1,"9:null\n"])</script><script>self.__next_f.push([1,"d:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n8:null\n"])</script><script>self.__next_f.push([1,"b:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"Skyfalling\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"分享技术、生活和思考的个人博客\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.svg\"}]],\"error\":null,\"digest\":\"$undefined\"}\n13:{\"metadata\":\"$b:metadata\",\"error\":null,\"digest\":\"$undefined\"}\n"])</script></body></html>